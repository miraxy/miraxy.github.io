
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="اسناد راهنما برای شروع کار با میرا">
    <meta name="author" content="kiavash">

    <title>یک مثال جامع - راهنمای میرا</title>

    <!-- Bootstrap Core CSS -->
    <link href="/static/mira-doc/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/static/mira-doc/style-rtl.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/vazir-font/v7.0.0/dist/font-face.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/samim-font/v1.0.2/dist/font-face.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/shabnam-font/v1.1.0/dist/font-face.css">
    <link href="/static/mira-theme/fonts/font-sahel/css/font-sahel.css" rel="stylesheet" type="text/css">
    <link href="/static/mira-theme/fonts/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
<div class="custom-rtl">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
              <div class="brand-centered">
                <a class="navbar-brand" href="/"><img src="/static/img/mira-c.png" class="img-responsive mira-header" alt="mira"></a>
              </div>
            </div>


                       <!-- Collect the nav links, forms, and other content for toggling
           <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
             <ul class="nav navbar-nav navbar-right">
               
                 <li>
                     <a href="http://localhost:80" name="اسناد راهنما برای شروع کار با میرا">راهنمای میرا</a>
                 </li>
               
                 <li>
                     <a href="http://localhost:80" name="چهارچوب مدیریت یکپارچه محتوا برای ساختن وبسایت‌های چندگانه">میرا</a>
                 </li>
               
             </ul>
           </div>
            /.navbar-collapse -->


        </div>

  </nav>


<!-- Main Content -->
<div class="container">
  <div class="row">
    <div class="col-lg-7 col-lg-offset-1 col-md-8">
      
      <a name="یک مثال جامع"></a>
         <h2><a href="/start-fa/sample/">یک مثال جامع</a></h2>
         <a name="more"></a><br><h4>نصب میرا در یک مسیر جدید:</h4>

<p>ابتدا یک پوشه خالی بسازید، نام آن را بگذارید mira
اگر در ویندوز هستید:</p>

<pre><code>md mira
</code></pre>

<p>در لینوکس و مک:</p>

<pre><code>mkdir mira
</code></pre>

<p>حالا وارد مسیر جدید شوید:</p>

<pre><code>cd mira
</code></pre>

<p>و میرا را در این مسیر پیکر بندی کنید:</p>

<pre><code>~/mira:&gt;  mira init
</code></pre>

<p>برای نوشتن این مثال‌ با این فرض پیش می‌رویم که قصد داریم چهار سایت در کنار هم داشته باشیم:</p>

<blockquote>
  <p>۱- وبلاگ به زبان فارسی. <br />
  ۲- وبلاگ به زبان انگلیسی. <br />
  ۳- یک سایت برای نوشتن داستان‌های کوتاه، نام «دنباله‌دار» را برای این سایت در نظر می‌گیریم. <br />
  ۴- یک سایت برای نوشتن مطالب آموزشی در مورد لینوکس.</p>
</blockquote>

<p>در طول این راهنما سعی میکنیم این چهار سایت را در کنار هم در میرا بسازیم، تنظیم کنیم، قالب دهی کنیم و در نهایت منتشر کنیم.
اما در ابتدا بیایید برای هر کدام با توجه به ورودی و خروجی مورد نظرمان یک تعریف مشخص کینم.</p>

<blockquote>
  <p>محتوا را در چه پوشه‌ای می‌خواهیم ذخیره کنیم <br />
  چه فیلدهای مشخصی باید داشته باشند <br />
  هر سایت چه دسته بندی‌هایی داشته باشد و چه دسته بندی‌هایی را می‌خواهیم آرشیو کنیم، مثل دسته بندی موضوعی، آرشیو زمانی و غیره <br />
  برای نوشتن متن‌ها از مارک‌آپ میخواهیم استفاده کنیم یا نه و اگر جواب مثبت بود از کدامیک از مارک‌آپ هایی که میرا پشتیبانی میکند <br />
  در چه آدرسی میخواهیم منتشر شوند <br />
  فایل‌های ضمیمه‌شان مثل عکس‌ها و غیره در کجا ذخیره شوند <br />
  و...  </p>
</blockquote>

<h3>قدم اول: نام دهی و محل ذخیره محتوا</h3>

<p>برای این که فایل‌های تنظیم، پیکربندی و پوشه‌های محتوا را به وجود بیاوریم، نیاز داریم که هر سایت برای معرفی شدن به میرا، یک نام مجزا، ترجیحا به حرف لاتین، داشته باشد.  </p>

<p>وبلاگ فارسی: blog-fa <br />
وبلاگ انگلیسی: blog-en <br />
داستان دنباله‌دار: story <br />
آموزش لینوکس: linux-learn  </p>

<h4>محل ذخیره محتوا:</h4>

<p>پس از نصب میرا چند پوشه برای شما ایجاد خواهد شد، یکی از این پوشه‌ها content است، محل اصلی ذخیره محتوا همین پوشه است، هر پوشه‌ی جدید در مسیر ریشه‌ی این مسیر، یک سایت جدید خواهد بود.
پس در content این <strong>پوشه‌</strong>ها را ایجاد میکنیم:</p>

<pre><code>~/mira/content/blog-fa/
~/mira/content/blog-en/
~/mira/content/story/
~/mira/content/linux-learn/
</code></pre>

<p>هر فایل یا دایرکتوری در هرکدام از این مسیرها، محتویات هر سایت را تشکیل خواهد داد</p>

<h3>قدم دوم: مشخص کردن فیلدهای پیش‌فرض برای هر سایت</h3>

<p>۱- فرض را بر این میگیریم که برای هر نوشته در وبلاگ فارسی، تصمیم داریم یک عکس اختصاصی در نظر بگیریم، آن را در هدر در فیلدی به اسم image مشخص می‌کنیم. <br />
همچنین در وبلاگ فارسی در نظر داریم دسته بندی براساس موضوع داشته باشیم category.</p>

<p>۲- در وبلاگ انگلیسی دسته بندی بر اساس تگ‌ها tags را مد نظر داریم.</p>

<p>۳- در مورد داستان‌هایمان بر اساس کلمات و موضوع داستان، کلمات کلیدی هر داستان را می‌خواهیم مشخص کنیم keywords
همچنین میخواهیم اگر داستان دیگری هم نوشته‌ایم که شبیه به این داستان باشد، به آن لینک بدهیم suggests.</p>

<p>۴- در مورد آموزش‌ها هم میخواهیم این فیلدها را داشته باشیم: کلمات کلیدی tags، یک فیلد توضیحات برای کامل کردن تیتر description، دسته بندیهای موضوعی categories، یک عکس برای توضیح مطلب image، و از آنجا که بیشتر از یک نفر در قرار است آموزش‌هایشان را بنویسند، نام نویسنده author.</p>

<p>میتوانیم هر بارکه پست جدیدی را با دستور new میسازیم، موارد مورد نیاز را به هدر اضافه یا حذف کنیم. اما احتمالاً اینکار سخت خواهد بود، شاید یک بار فراموش کنیم فیلدی را اضافه کنیم یا با غلط املایی آن را تایپ کنیم یا هر چیز دیگری، اما راه حل برای اجتناب از این تکرار چیست؟
جواب استفاده کردن از شاخه‌ی structure است.</p>

<p>برای فیلدهای اختصاصی هر پست، میرا در شاخه‌ی structure برنامه ابتدا به دنبال نام فایلی هم نام با نام طبقه شما میگردد، اگر این فایل موجود باشد، به جز فیلدهایی که بالا نوشته شدند، محتوییات آن فایل نیز به هدر شما اضافه میشود، اگر این فایل موجود نبود، برای محتویات آن طبقه برنامه از فایل default استفاده میکند.</p>

<p>چهار <strong>فایل</strong> در شاخه‌ی structure همنام بانام سایت‌ها میسازیم</p>

<pre><code>~/mira/structure/blog-fa
~/mira/structure/blog-en
~/mira/structure/story
~/mira/structure/linux-learn
</code></pre>

<p>محتوای هر یک از این چهار فایل را به این صورت مشخص میکنیم:</p>

<p><code>~/mira/structure/blog-fa</code></p>

<pre><code>_index:
category:
image:
</code></pre>

<p><code>~/mira/structure/blog-en</code></p>

<pre><code>_index:
tags:
 - 
</code></pre>

<p><code>~/mira/structure/story</code></p>

<pre><code>_index:
keywords:
 - 
suggests:
</code></pre>

<p><code>~/mira/structure/linux-learn</code></p>

<pre><code>_index:
description:
categories:
tags:
image:
author:
</code></pre>

<p>در مورد فیلد _index و کاربرد آن در ادامه خواهیم خواند. فعلا فقط آن را در فایل‌های استراکچر می‌گذاریم باشد.</p>

<p>حالا محتویات شاخه استراکچر این‌ها خواهند بود</p>

<pre><code>~/mira/structure/
.
│
├── 
├── blog-en
├── blog-fa
├── default
├── linux-learn
└── story
</code></pre>

<h2><a href="https://raw.githubusercontent.com/miraxy/sample/master/structure.zip">دانلود شاخه structure</a></h2>

<h3>قدم سوم: تنظیمات اولیه</h3>

<p>حالا باید مشخص کنیم هر کدام از این سایت‌ها را میخواهیم در چه آدرسی و به چه شکل منتشر کنیم، بدنه اصلی نوشته‌هایمان را چگونه بنویسیم، آدرس نهایی برای هر پست به چه شکلی باشید و …</p>

<h4>تنظیمات عمومی</h4>

<p>ابتدا چند فرض عمومی را در نظر میگیریم، نام نویسنده مطالب، آدرس ایمیل، تصویر نویسنده و لوگوی سایت برای هر چهار سایت در صورتیکه در هدر هر پست تغییر نکنند(مثل قسمت آموزش لینوکس که مطالب مکن بود نویسنده جدا داشته باشند) ثابت است، هر چهار سایت از یک قالب مشترک استفاده می‌کنند، سایت‌هایمان را قرار است در آدرس address.com منتشر کنیم.  </p>

<p>فایل‌های ضمیمه عمومی را در شاخه‌ی statics در ریشه اصلی می‌توانید نگهداری کنید</p>

<pre><code>~/mira/statics
</code></pre>

<p>تمام محتوای این شاخه به مسیری که در تنظیمات عمومی </p>

<pre><code>~/mira/config.yml
</code></pre>

<p>در فیلد static مسیر دهی کرده باشید منتقل خواهد شد، لوگو، تصاویر مشترک، و ... را در این شاخه ذخیره خواهیم کرد، متعلقات قالب را هم که در آینده میسازیم در همین مسیر نگهداری خواهیم کرد. <br />
در گام پنجم در مورد فیال‌های ضمیمه و static کامل‌تر و با چند مثال صحبت خواهیم کرد.</p>

<h4>تنظیمات اختصاصی هر سایت</h4>

<p>می‌خواهیم هر کدام از این چهار سایت را در این آدرس‌ها منتشر کنیم:</p>

<ul>
<li>وبلاگ فارسی: address.com/blog</li>
<li>وبلاگ انگلیسی: address.com/en</li>
<li>داستان دنباله‌دار: address.com/story</li>
<li>آموزش لینوکس: address.com/linux</li>
</ul>

<p>برای این منظور باید فیلدهای url و root را مقدار دهی کنیم.</p>

<p>در مورد آدرس نهایی هر پست: <br />
به یاد داشته باشید آدرس‌ها میتوانند به شکل پوشه یا فایل تولید شوند، برای دیدن تفاوت این دو مورد، در پایان گام تنظیمات، تفاوت فیلد permalink در فایل‌های تنظیمات وبلاگ فارسی با سایر سایت‌ها را ببینید. <br />
 - تصمیم داریم نوشته‌های وبلاگ فارسی در آدرس‌هایی که براساس تاریخ انتشار و دسته بندی موضوعی تولید شده‌اند منتشر شوند و در آدرس نهایی category و تاریخ‌ها به شکل مسیر باشند و تیتر مطلب به شکل یک فایل باشد.
 - پست‌های وبلاگ انگلیسی از تاریخ انتشار در آدرس ثایت استفاده کنند. آدرس به شکل یک مسیر باشد.
 - برای داستان‌ها تنها نام داستان در آدرس باشد. آدرس به شکل یک مسیر باشد.
 - در آموزش لینوکس، در آدرس‌ هر پست نام نویسنده هم ذکر شده باشد. آدرس به شکل یک مسیر باشد.
برای تنظیم این موارد در فایل تنظیمات فیلد permalink را باید مقدار دهی کنیم</p>

<p>به شکل پیش‌فرض تمام نوشته‌ها را تصمیم داریم به شکل markdown بنویسیم. <br />
برای تنظیم این مورد باید فیلد default_markup را مقدار دهی کنیم.</p>

<p>برای قالب انتشار هر چهار سایت را با استفاده از یک قالب منتشر می‌کنیم، می‌خواهیم در ادامه قالب خودمان را با نام my-theme بسازیم، فعلاً فقط به مقداردهی اولیه اکتفا میکنیم و فیلد template را مقدار دهی میکنیم. این قالب را در ادامه همراه هم به وجود می‌آوریم.</p>

<p>لیست‌های آرشیوی مورد نظرمان:</p>

<ul>
<li>برای وبلاگ فارسی category و tags</li>
<li>برای وبلاگ انگلیسی tags</li>
<li>برای داستان هیچ لیست آرشیوی در نظر نداریم</li>
<li>و در آموزش هم tags, categories, author</li>
</ul>

<p>برای این‌کار باید فیلد lists را مقدار دهی کنیم.</p>

<p>نمایش تعداد نوشته‌ها در هر صفحه:</p>

<ul>
<li>برای وبلاگ‌های فارسی و انگلیسی، در صفحه اول میخواهیم ۵ نوشته آخر نوشته شده باشند، و در صفحات آرشیو هم تیتر ۱۰ نوشته آخر در هر صفحه باشد.</li>
<li>برای آموزش‌ها میخواهیم در صفحه اصلی ۱۰ نوشته آخر نمایش داده شوند و در صفحات آرشیو تمام پست‌ها در یک صفحه برای هر آرشیو باشند.</li>
<li>برای داستان دنباله دارمان هم میخواهیم تمام داستان‌هایی که تا به حال نوشته‌ایم در همان صفحه اول باشند، و ترتیب نمایششان هم برعکس باشد، به این ترتیب که نوشته‌های قدیمی‌تر در بالا باشند.</li>
</ul>

<p>برای نمایش تعداد هر پست در صفحه اول به فیلد post_num مقدار دهی میکنیم و برای تعداد پست‌ها در هر صفحه آرشیو هم archive_post_num <br />
برای ترتیب نمایش هم فیلد post_sort </p>

<p>فایل‌های ضمیمه وبلاگ‌های فارسی و انگلیسی را هم در زیر شاخه‌ی آدرس خودشان در شاخه‌ی assets می‌خواهیم ذخیره کنیم، اما ضمیمه‌های آموزش لینوکس و داستان را در زیرشاخه‌ی آدرس خود سایت اما در شاخه‌ی static.</p>

<p>در آخر برای هر سه سایتی که به فارسی مینویسیم می‌خواهیم تاریخ هجری شمسی را هم داشته باشیم، برای این منظور باید پلاگین Jdate را فعال کنیم. و در وبلاگ فارسی آرشیو بر اساس تاریخ شمسی هم می‌خواهیم داشته باشیم.</p>

<p>برای تنظیمات عمومی فایل config.yml در ریشه اصلی از قبل موجود است، برای ذخیره کردن تنظیمات مشخص شده برای هر سایت هم، در دایرکتوری config هم‌نام با نام هر سایت در شاخه یک فایل جدید با پسوند yml میسازیم</p>

<pre><code>~/mira/config/blog-fa.yml
~/mira/config/blog-en.yml
~/mira/config/story.yml
~/mira/config/linux-learn.yml
</code></pre>

<p>با توجه به تمام مواردی که در بالا برای تنظیمات در نظر گرفتیم هر کدارم از این چهار فایل باید اینگونه باشند:</p>

<p><code>~/mira/config.yml</code></p>

<pre><code>title: نوشته های من 
description: نوشته‌های من در باره‌ی تجربیات روزانه و سفرهایم، آهنگ‌هایی که شنیدم و داستان‌هایی که مینویسم

author: اسم شما
email: Your@Email.com
url: http://www.address.com/
root: /
static: /static
imageurl: /static/images
default_markup: markdown
default_floor: blog-fa
post_num: 5
template: default-theme

logo: /static/images/logo.jpg
author_image: /static/images/author_image.jpg
</code></pre>

<p><code>~/mira/config/blog-fa.yml</code></p>

<pre><code>title: وبلاگ فارسی من
description: اینجا وبلاگ فارسی من است

url: http://www.address.com/blog/
root: /blog/
static: /blog/assets
imageurl: /blog/assets/article_images

permalink: :category/:year/:month/:day/:title.html
post_num: 5
archive_post_num: 10

lists:
 - category
 - jdate

plugins:
 - Jdate

lang: fa
</code></pre>

<p><code>~/mira/config/blog-en.yml</code></p>

<pre><code>title: my english blog
description: this is my english blog

url: http://www.address.com/en/
root: /en/
static: /en/assets
imageurl: /en/assets/images

permalink: :year/:month/:day/:title/
post_num: 5
archive_post_num: 10

lists:
 - tags

lang: en
</code></pre>

<p><code>~/mira/config/story.yml</code></p>

<pre><code>title: دنباله دار
description: توضیحاتی در مورد داستان دنباله دار من

url: http://www.address.com/story/
root: /story/
static: /story/static
imageurl: /story/static/images

permalink: /:title/
post_num: all
post_sort: reverse

lists:

plugins:
 - Jdate

lang: fa
</code></pre>

<p><code>~/mira/config/linux-learn.yml</code></p>

<pre><code>title: آموزش لینوکس
description: مطالبی که روزانه در مورد لینوکس یاد میگیریم و دوست داریم با دیگران به اشتراک بگذاریم

url: http://www.address.com/linux/
root: /linux/
static: /linux/static
imageurl: /linux/static/images

permalink: :author/:title/
default_markup: markdown
post_num: 10
archive_post_num: all

lists:
 - categories
 - tags
 - author

plugins:
 - Jdate

lang: fa
</code></pre>

<h2><a href="https://raw.githubusercontent.com/miraxy/sample/master/config.zip">دانلود فایل config.yml و شاخه config</a></h2>

<p>به فایل تنظیمات سایت «دنباله دار» نگاه کنید، فیلد lists وجود دارد، اما به آن مقداری داده نشده، این یعنی میخواهید هیچ آرشیوی نداشته باشید، اگر فیلد lists را به جای خالی رها کردن، کلا در تنظیمات وارد نمی‌کردیم، به معنی وجود نداشتن هیچ آرشیوی نیست، بلکه به این معنی بود که هر مقداری که فایل تنظیمات عمومی برای آرشیو در خود دارد برای این سایت هم همان مقدار در نظر گرفته شود.</p>

<p>همانطور که میبینید در هیچ کدام از فایل‌های تنظیم اختصاصی template و default_markup وجود ندارد، اما در فایل تنظیمات عمومی، config.yml در شاخه‌ی اصلی این فیلد هم وجود دارد و هم مقدار دارد، وجود نداشتن یک فیلد در <strong>تنظیمات اختصاصی</strong> به این معنی است که می‌خواهیم برای آن فیلد از تنظیمات عمومی پیروی کنیم. پس my-theme و markdown برای تمام سایت‌ها معتبر است.</p>

<p><strong>نکته:</strong> در تنظیمات وبلاگ انگلیسی فیلدی را اضافه کرده‌ایم برای مشخص کردن زبان
<code>lang: en</code>
و در سایر سایت‌ها
<code>lang: fa</code>
این یک فیلد شخصی است که در تنظیمات هیچ تعریف مشخصی ندارد و روی تنظیمات تاثیری نمی‌گذارد، این فیلد را برای استفاده در قالب نهایی در آینده نوشته‌ایم، فعلا کاری با آن نداریم.</p>

<h3>قدم چهارم: نوشتن اولین پست</h3>

<p>حالا که تمام کارهای اولیه را انجام دادیم شروع به نوشتن چند پست میکنیم در هر سایت می‌کنیم</p>

<pre><code>mira new -t 'سلام دنیا' -f blog-fa
</code></pre>

<p>با دستور بالا یک نوشته جدید در وبلاگ فارسی اضافه کردیم، پس از نوشتن دستور بالا، پیامی شبیه به این نمایش داده می‌شود:</p>

<pre><code>~/mira/content/blog-fa/2017-3-23-سلام-دنیا.md created
</code></pre>

<p>که در اصل مسیری است که فایل ساخته شده در آن ذخیره شده، این فایل را با هر ویرایشگری که دوست دارید باز کنید و ویرایش کنید، محتویات آن بعد از ویرایش باید تقریبا شبیه به این باشد:</p>

<pre><code>---
utid: 20170323112305
date: 2017-03-23 11:23:05
title: سلام دنیا
_index:
category: آزمایش
image: /blog/assets/article_images/hello.jpg
---
سلام دنیا  
این اولین نوشته من است که برای تست کردن نوشته شده.  
این یک متن آزمایشی است.
</code></pre>

<p><strong>اخطار</strong>: <br />
فیلد utid را به هیچ عنوان حذف یا ویرایش نکنید، این فیلد یک کلید برای خواندن، مسیردهی در حافظه، چینش، اولویت بندی و تمام کارهای دیگری است که میرا با محتوا می‌کند، هر فایلی بدون این فیلد از نظر میرا یک فایل محتوا به حساب نمی‌آید و از وجود آن چشم پوشی می‌کند.</p>

<p>چند پست دیگر را هم بنویسید،</p>

<pre><code>mira new -t 'first post' -f blog-en
mira new -t 'یک ویژگی جدید در آخرین نسخه هسته که تازه دیروز منتشر شده و به نظرم خیلی جالب بود' -f linux-learn
mira new -t 'آغاز' -f story
</code></pre>

<h4>اما فیلد _index که در استراکچر سربرگ‌ها نوشته‌ایم چیست و به چه دردی می‌خورد؟</h4>

<p>با توجه به آنچه در تنظیمات قرار دادیم، هر کدام از این چهار پست آدرس‌های به این صورت خواهند داشت:</p>

<pre><code>/blog/CATEGORY/a2017/03/23/سلام-دنیا.html
/en/2017/03/23/first-post/
/linux/AUTHOR/یک-ویژگی-جدید-در-آخرین-نسخه-هسته-که-تازه-دیروز-منتشر-شده-و-به-نظرم-خیلی-جالب-بود/
/story/آغاز/
</code></pre>

<p>نکته: در آدرس‌هایی که برای مثال در بالا نوشته شده‌اند، CATEGORY و AUTHOR با مقداری که در هدر هر پست هست جایگزین می‌شود، فعلا چون در تمام قسمت‌ها مطلبی ننوشتیم از نام فیلدها استفاده کردیم.</p>

<p>به جز وبلاگ انگلیسی، در سه وبلاگ دیگر که تیترهایشان فارسی هستند، آدرس نهایی هم به زبان فارسی ساخته شده و آدرس مطلبی که در آموزش لینوکس نوشتیم هم که خیلی خیلی طولانی است. اما شاید بخواهید آدرس‌ها همه به لاتین باشند و یا کوتاه، index اینجا به کمک ما می‌آید، نوشته ها را یک بار دیگر ویرایش کنید و این‌بار به index مقدار بدهید:</p>

<pre><code>~/mira/content/blog-fa/2017-3-23-سلام-دنیا.md

---
utid: 20170323112305
date: 2017-03-23 11:23:05
title: سلام دنیا
_index: hello world
category: آزمایش
image: /blog/assets/article_images/hello.jpg
---
سلام دنیا  
این اولین نوشته من است که برای تست کردن نوشته شده.  
این یک متن آزمایشی است.
</code></pre>

<p>و</p>

<pre><code>~/mira/content/blog-en/first-post.md

---
utid: 20170323112351
date: 2017-03-23 11:23:51
title: first post
_index:
tags:
 - first
 - test
---
hello world  
this is my first post  
</code></pre>

<p>و</p>

<pre><code>~/mira/content/story/2017-3-23-آغاز.md

---
utid: 20170323112408
date: 2017-03-23 11:24:08
title: آغاز
_index: start
keywords:
 - مقدمه
 - شروع
 - آغاز
suggests:
image: /story/assets/first.jpg
---
### مقدمه
شروع داستان نویسی من از این نقطه است و از این به بعد سعی می‌کنم هر هفته یک داستان جدید به داستان‌هایم اضافه کنم  

امیدوارم از خواندن آن‌ها لذت ببرید
</code></pre>

<p>این اولین پست ما بود، هنوز داستان مشابهی برای لینک دادن نداریم، فعلا suggests را خالی می‌گذاریم. <br />
و</p>

<pre><code>~/mira/content/linux-learn/2017-3-23-یک-ویژگی-جدید-در-آخرین-نسخه-هسته-که-تازه-دیروز-منتشر-شده-و-به-نظرم-خیلی-جالب-بود.md

---
utid: 20170323112534
date: 2017-03-23 11:25:34
title: یک ویژگی جدید در آخرین نسخه هسته که تازه دیروز منتشر شده و به نظرم خیلی جالب بود
_index: amazing update
description: چند ویژگی جدید که در آخرین نسخه به هسته اضافه شده و انعطاف پذیری را چندین برابر افزایش می‌دهد
categories: 
 - هسته
 - لینوکس
tags:
 - هسته
 - لینوکس
 - آپدیت هسته
 - ویژگی جدید
 - هسته لینوکس
image: /linux/static/feutured/core.jpg
author: someone
---
این آپدیت که تازه دیروز منتشر شده بسیار بسیار هیجان انگیز است  
و چند ویژگی جدید را در خود دارد که شامل این‌ها هستند:

 - ...
 - ...
</code></pre>

<p>حالا آدرس نهایی تولید شده برای هرکدام از این پست‌ها به این شکل خواهند بود:</p>

<pre><code>/blog/آزمایش/i2017/03/23/hello-world.html
/en/2017/03/23/first-post/
/linux-learn/someone/amazing-update/
/story/start/
</code></pre>

<p>به آدرس‌ها دقت کنید، وبلاگ فارسی با یک نام فایل با پسوند html تمام شده است، اما مابقی یک آدرس کامل هستند بدون هیچ فایلی هستند، این آدرس‌ها در اصل این‌ها هستند:</p>

<pre><code>/en/2017/03/23/first-post/index.html
/linux-learn/someone/amazing-update/index.html
/story/start/index.html
</code></pre>

<p><strong>نکته</strong>: <br />
نام و پسوند فایل‌ها در دایرکتوری محتوا یا content در پردازش نهایی هیچ تاثیری نخواهند داشت، به هر شکلی که می‌خواهید می‌توانید آن‌ها را تغییر دهید، برای مثال این نام فایل را ممکن است دوست نداشته باشید:</p>

<pre><code>~/mira/content/linux-learn/2017-3-23-یک-ویژگی-جدید-در-آخرین-نسخه-هسته-که-تازه-دیروز-منتشر-شده-و-به-نظرم-خیلی-جالب-بود.md
</code></pre>

<p>آن‌را به هر چیزی که می‌خواهید تغییر دهید، مثلا:</p>

<pre><code>~/mira/content/linux-learn/2017-3-23-new-update.markdown
</code></pre>

<p><strong>پیشنهاد</strong> <br />
برای ساختن فایل‌های جدید با دستور mira new از تیتر مورد نظرتان استفاده <strong>نکنید</strong>، از یک نام ساده استفاده کنید و بعد تیتر و index را در هدر فایل مشخص کنید، برای مثال به جای این دستور:</p>

<pre><code>mira new -t 'یک ویژگی جدید در آخرین نسخه هسته که تازه دیروز منتشر شده و به نظرم خیلی جالب بود' -f linux-learn
</code></pre>

<p>از چیزی شبیه به این استفاده کنید:</p>

<pre><code>mira new -t 'new update' -f linux-learn
</code></pre>

<p><strong>نکته</strong>: <br />
مسیر ذخیره شدن و نام فایل در پوشه‌ی محتوای هر سایت از نظر میرا اهمیتی ندارد و با تمام فایل‌های محتوایی که در هر عمقی پیدا میکند، یکسان و تنها با توجه به سربرگ فایل‌ها و تنظیمات ذخیره شده برخورد می‌کند. برای مثال تمام این مسیرها برای فایل مثال بالا یکسان می‌باشند و همه در همان آدرس و به همان صورت منتشر می‌شوند:</p>

<pre><code>~/mira/content/linux-learn/2017-3-23-new-update.markdown

~/mira/content/linux-learn/new-update.md

~/mira/content/linux-learn/new.txt

~/mira/content/linux-learn/deep/2017-3-23-new-update.markdown

~/mira/content/linux-learn/folder/sub/folder/2017-3-23-new-update.markdown

~/mira/content/linux-learn/update/deep/more/deep/2017-3-23-new-update.markdown

~/mira/content/linux-learn/update/deep/more/deep/new.txt
</code></pre>

<h3>قدم پنجم: فایل‌های ضمیمه</h3>

<p>فایل‌های ضمیمه فایل‌های ثابتی هستند که در محتوا از آن‌ها استفاده می‌کنیم اما نیازی به پردازش توسط برنامه‌ی میرا ندارند، مثل عکس‌ها یا فایل‌های pdf، موسیقی، استایل شیت‌ها فایل‌های جاوااسکریپت یا هر چیز دیگری که در نوشته‌هایمان از آن‌ها استفاده کنیم یا بخواهیم به آن‌ها لینک بدهیم.</p>

<p>میرا یک پوشه‌ی عمومی برای ضمیمه‌ها در ریشه‌ی اصلی در شاخه‌ی statics دارد</p>

<pre><code>~/mira/statics
</code></pre>

<p>و بی‌نهایت پوشه‌ی دیگر برای هرسایت.</p>

<h4>ضمیمه‌های عمومی:</h4>

<p>محتویات پوشه‌ی عمومی
<code>~/mira/statics</code>
به مسیری که در فایل تنظیمات
<code>~/mira/config.yml</code>
و فیلد static مسیر دهی کرده‌اید منتقل می‌شود و در قالب با استفاده از کد
<code>{{ Main.STATIC }}</code>
قابل دسترسی خواهد بود.</p>

<p>برای مثال اگر فیلد static در فایل config.yml مساوی
<code>/attach</code>
باشد و سایت‌مان را قرار باشد در address.com منتشر کنیم، نتیحه مسیری شبیه به این خواهد بود:</p>

<pre><code>~/mira/statics     &gt;       http://address.com/attach/
</code></pre>

<h4>ضمیمه‌های اختصاصی هر سایت:</h4>

<p>در پوشه‌ی محتوای هر سایت در شاخه‌ی content هر پوشه‌ای که با خط زیر یا همان آندرلاین _ شروع شود از نظر میرا یک پوشه‌ی ضمیمه به حساب می‌آید و تمام محتویات آن‌را بدون هیچ بررسی به مسیر اصلی سایت منتقل میکند.</p>

<p>یک مثال: <br />
در بخش تنظیمات برای وبلاگ فارسی(blog-fa) در فیلدهای url و root مسیر blog را برای انتشار مشخص کردیم، پس هر پوشه‌ای که در مسیر blog-fa با ـ شروع شود به عنوان ضمیمه در مسیر blog آدرس دهی میشود، به این مثال‌ها دقت کنید:</p>

<pre><code>~mira/content/blog-fa/_assets
/blog/assets/

~mira/content/blog-fa/_statics
/blog/statics/

~mira/content/blog-fa/deep/_image
/blog/deep/image

~mira/content/blog-fa/more/deep/folder/_attach
/blog/more/deep/folder/attach
</code></pre>

<p>دقت داشته باشید قبل از رسیدن به پوشه‌ی ضمیمه، اگر فایل محتوایی موجود باشد، برای انتشار آماده می‌شود، تنها بعد از رسیدن به اولین شاخه‌ای که با _ شروع شده باشد، میرا دست از نفوذ به عمق شاخه‌ها می‌کشد. برای مثال مسیرهای زیر را در نظر بگیرید</p>

<pre><code>~mira/content/blog-fa/more/content.md
~mira/content/blog-fa/more/deep/post.txt
~mira/content/blog-fa/more/deep/folder/contetnt.md
~mira/content/blog-fa/more/deep/folder/_attach
~mira/content/blog-fa/more/deep/folder/_attach/post.markdown
</code></pre>

<p>میرا سه فایلی را که قبل از رسیدن به
<code>~mira/content/blog-fa/more/deep/folder/_attach</code>
قرار دارند، برای انتشار بررسی و آماده می‌کند، اما فایل آخر
<code>~mira/content/blog-fa/more/deep/folder/_attach/post.markdown</code>
را به عنوان یک فایل ضمیمه می‌شناسد و تنها آن را همان شکلی که هست به مسیر انتشار انتقال می‌دهد.</p>

<p><strong>نکته</strong>: <br />
احتمالا متوجه شدید که فیلد static در فایل تنظیمات اختصاصی هیچ تاثری در انتقال و آدرس‌دهی به مسیر فایل‌ها و پوشه‌های ضمیمه برای سایت‌ها ندارد.</p>

<p>این فیلد تنها جهت سهولت دسترسی در قالب و استفاده در قالب سایت با تگ
<code>{{ STATIC }}</code>
می‌باشد.</p>

<h3>imageurl</h3>

<p>اما در تنظیمات یک فیلد دیگر را به نام imageurl مقدار دهی کرده بودیم، برخلاف فیلد static که در تنظیمات عمومی تاثیر گذار بود و در تنظیمات اختصاصی تنها برای دسترسی در قالب استفاده می‌شد، این فیلد در تنظیمات عمومی استفاده‌ی خاصی ندارد و فقط برای دسترسی در قالب تعریف شده، اما در تنظیمات اختصاصی تاثیر گذار است.</p>

<p>مورد استفاده این فیلد در پارسرهای داخلی میرا و هنگلم نوشتن متن محتوا است، در تنظیمات وبلاگ فارسی به این فیلد این مقدار را داده بودیم:</p>

<pre><code>imageurl: /blog/assets/article_images
</code></pre>

<p>حالا در هر کدام از نوشته‌های این سایت اگر از تگ {{ img }} استفاده کنیم، میرا دنبال تصاویر در این مسیر میگردد. <br />
نحوه‌ی استفاده از {{ img }} به این شکل است:</p>

<pre><code>{{ img image/address/pic.jpg [alt] [title] }}
</code></pre>

<p>اولین نوشته در وبلاگ فارسی را به یاد دارید؟</p>

<pre><code>~/mira/content/blog-fa/2017-3-23-سلام-دنیا.md
</code></pre>

<p>بیایید یک‌بار دیگر آن‌را ویرایش کنیم:</p>

<pre><code>---
utid: 20170323112305
date: 2017-03-23 11:23:05
title: سلام دنیا
_index: hello world
category: آزمایش
image: /blog/assets/article_images/hello.jpg
---
سلام دنیا  
این اولین نوشته من است که برای تست کردن نوشته شده.

{{ img /future/sky.jpg [image alt] [pic title] }}

این یک متن آزمایشی است.
</code></pre>

<p>نتیجه‌ی نهایی برای انتشار این‌گونه خواهد بود:</p>

<pre><code>&lt;p&gt;سلام دنیا&lt;/p&gt;
&lt;p&gt;این اولین نوشته من است که برای تست کردن نوشته شده.&lt;/p&gt;
&lt;p&gt;&lt;img src="/blog/assets/article_images/future/sky.jpg" alt="image alt" title="pic title"&gt;&lt;/p&gt;
&lt;p&gt;این یک متن آزمایشی است.&lt;/p&gt;
</code></pre>

<p>در برچسب {{ img }} مقادیر [alt] و [title] اختیاری هستند و می‌توانید از آن‌ها چشم پوشی کنید.</p>

<h3>قدم ششم: دانلود محتوای مثال</h3>

<p>برای اینکه مثال‌های کامل‌تری داشته باشیم، علاوه بر فایل‌های فشرده structure و config که در پایان قدم‌های دوم و سوم به آن‌ها لینک داده شده بود، قسمت محتوا هم با استفاده از تعدادی از نوشته‌های سایت‌های زیر به وجود آمده.</p>

<ul>
<li>behroozam.com برای استفاده در وبلاگ فارسی</li>
<li>sallar.me وبلاگ انگلیسی</li>
<li>morde.ir داستان‌ها</li>
<li>linuxiha.ir آموزش لینوکس</li>
</ul>

<h2><a href="https://raw.githubusercontent.com/miraxy/sample/master/content.zip">دانلود شاخهcontent</a></h2>

<p>این فایل را دانلود کنید و آماده قدم گذاشتن به گام هفتم، برای ساختن قالب شوید.</p>

<h3>ادامه دارد...</h3>

<p>البته می‌توانید تا نوشته شدن گام هفتم، با استفاده از قالب پیش‌فرضی که همراه با میرا نصب شده، نتیجه‌ی کار را تا اینجا ببینید و امتحان کنید، اگر از فایل فشرده تنظیمات استفاده می‌کنید، نیازی به تغییر نیست، تایپ کنید:</p>

<pre><code>mira build
</code></pre>

<p>اما اگر فایل config.yml را بر اساس آن‌چه در بالا گفته شد خودتان به وجود آوردید، ابتدا مقدار فیلد template را از my-theme به default-theme تغییر دهید</p>
      
    </div>

    <div class="col-lg-3 col-lg-offset-1 col-md-3 col-md-offset-1 sidebar">
<ul class="nav">
  <li><h2><a href="/start-fa/">راهنمای میرا</a></h2></li>
  <li><h5>اسناد راهنما برای شروع کار با میرا</h5></li>

    
      
        <h3>شروع</h3>
      
      <h5><a href="#نصب">نصب</a></h5>
<!--      <h5><a href="#/start-fa/install/">نصب</a></h5> -->
    
      
      <h5><a href="#شروع">شروع</a></h5>
<!--      <h5><a href="#/start-fa/start/">شروع</a></h5> -->
    
      
      <h5><a href="#اولین نوشته">اولین نوشته</a></h5>
<!--      <h5><a href="#/start-fa/first-post/">اولین نوشته</a></h5> -->
    
      
      <h5><a href="#اولین انتشار">اولین انتشار</a></h5>
<!--      <h5><a href="#/start-fa/first-build/">اولین انتشار</a></h5> -->
    
      
      <h5><a href="#پیش نمایش">پیش نمایش</a></h5>
<!--      <h5><a href="#/start-fa/preview/">پیش نمایش</a></h5> -->
    
    
      
        <h3>تنظیمات</h3>
      
      <h5><a href="#تنظیمات">تنظیمات</a></h5>
<!--      <h5><a href="#/start-fa/config/">تنظیمات</a></h5> -->
    
      
      <h5><a href="#استفاده از تنظیمات در قالب">استفاده از تنظیمات در قالب</a></h5>
<!--      <h5><a href="#/start-fa/configs-in-templates/">استفاده از تنظیمات در قالب</a></h5> -->
    
    
      
        <h3>محتوا</h3>
      
      <h5><a href="#مقدمه">مقدمه</a></h5>
<!--      <h5><a href="#/start-fa/content/">مقدمه</a></h5> -->
    
      
      <h5><a href="#تولید">تولید</a></h5>
<!--      <h5><a href="#/start-fa/creat/">تولید</a></h5> -->
    
      
      <h5><a href="#سربرگ">سربرگ</a></h5>
<!--      <h5><a href="#/start-fa/header/">سربرگ</a></h5> -->
    
      
      <h5><a href="#utid">utid</a></h5>
<!--      <h5><a href="#/start-fa/utid/">utid</a></h5> -->
    
      
      <h5><a href="#date">date</a></h5>
<!--      <h5><a href="#/start-fa/date/">date</a></h5> -->
    
      
      <h5><a href="#title">title</a></h5>
<!--      <h5><a href="#/start-fa/title/">title</a></h5> -->
    
      
      <h5><a href="#_index">_index</a></h5>
<!--      <h5><a href="#/start-fa/_index/">_index</a></h5> -->
    
      
      <h5><a href="#author">author</a></h5>
<!--      <h5><a href="#/start-fa/author/">author</a></h5> -->
    
      
      <h5><a href="#_markup">_markup</a></h5>
<!--      <h5><a href="#/start-fa/_markup/">_markup</a></h5> -->
    
      
      <h5><a href="#_permalink">_permalink</a></h5>
<!--      <h5><a href="#/start-fa/_permalink/">_permalink</a></h5> -->
    
      
      <h5><a href="#فیلدهای انتخابی">فیلدهای انتخابی</a></h5>
<!--      <h5><a href="#/start-fa/other-fields/">فیلدهای انتخابی</a></h5> -->
    
      
      <h5><a href="#لیست ها">لیست ها</a></h5>
<!--      <h5><a href="#/start-fa/lists/">لیست ها</a></h5> -->
    
      
      <h5><a href="#آرشیو">آرشیو</a></h5>
<!--      <h5><a href="#/start-fa/archive/">آرشیو</a></h5> -->
    
      
      <h5><a href="#استراکچر">استراکچر</a></h5>
<!--      <h5><a href="#/start-fa/structure/">استراکچر</a></h5> -->
    
      
      <h5><a href="#بدنه اصلی محتوا">بدنه اصلی محتوا</a></h5>
<!--      <h5><a href="#/start-fa/content-body/">بدنه اصلی محتوا</a></h5> -->
    
    
      
        <h3>قالب</h3>
      
      <h5><a href="#_layout">_layout</a></h5>
<!--      <h5><a href="#/start-fa/_layout/">_layout</a></h5> -->
    
      
      <h5><a href="#_type">_type</a></h5>
<!--      <h5><a href="#/start-fa/_type/">_type</a></h5> -->
    
      
      <h5><a href="#پوسته و اجزای تشکیل دهنده">پوسته و اجزای تشکیل دهنده</a></h5>
<!--      <h5><a href="#/start-fa/template/">پوسته و اجزای تشکیل دهنده</a></h5> -->
    
      
      <h5><a href="#main.tt2">main.tt2</a></h5>
<!--      <h5><a href="#/start-fa/main-template/">main.tt2</a></h5> -->
    
      
      <h5><a href="#index.tt2 و atom.tt2">index.tt2 و atom.tt2</a></h5>
<!--      <h5><a href="#/start-fa/indextemplate/">index.tt2 و atom.tt2</a></h5> -->
    
      
      <h5><a href="#archive.tt2">archive.tt2</a></h5>
<!--      <h5><a href="#/start-fa/archive-template/">archive.tt2</a></h5> -->
    
      
      <h5><a href="#post-template">post-template</a></h5>
<!--      <h5><a href="#/start-fa/post-template/">post-template</a></h5> -->
    
      
      <h5><a href="#نمایش محتوا، با استفاده از POSTS">نمایش محتوا، با استفاده از POSTS</a></h5>
<!--      <h5><a href="#/start-fa/show-posts/">نمایش محتوا، با استفاده از POSTS</a></h5> -->
    
      
      <h5><a href="#استفاده از فیلدهای فایل‌های تنظیمات در قالب">استفاده از فیلدهای فایل‌های تنظیمات در قالب</a></h5>
<!--      <h5><a href="#/start-fa/config-fields/">استفاده از فیلدهای فایل‌های تنظیمات در قالب</a></h5> -->
    
    
      
        <h3>parser</h3>
      
      <h5><a href="#پارسرهای داخلی میرا">پارسرهای داخلی میرا</a></h5>
<!--      <h5><a href="#/start-fa/parser/">پارسرهای داخلی میرا</a></h5> -->
    
      
      <h5><a href="#img">img</a></h5>
<!--      <h5><a href="#/start-fa/img-parser/">img</a></h5> -->
    
    
      
        <h3>مثال</h3>
      
      <h5><a href="#یک مثال جامع">یک مثال جامع</a></h5>
<!--      <h5><a href="#/start-fa/sample/">یک مثال جامع</a></h5> -->
    
</ul>
</div>


  </div>
</div>

<br>
    <!-- Footer -->
    <footer>
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                  <li>
                    <a href="mailto: kiavash@gmail.com">
                      <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>
                      </span>
                    </a>
                  </li>
                  <li>
                    <a href="//twitter.com/kiavash">
                      <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                      </span>
                    </a>
                  </li>
                  <li>
                    <a href="//gitlab.com/kiavash/mira">
                      <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-gitlab fa-stack-1x fa-inverse"></i>
                      </span>
                    </a>
                  </li>
                  <li>
                    <a href="//github.com/kiamazi/mira">
                      <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                      </span>
                    </a>
                  </li>
                </ul>
                <p><i class="fa fa-copyright" aria-hidden="true"></i>&nbsp; GPLv3</p>
              </div>
          </div>
      </div>
    </footer>

    <!-- jQuery -->
    <script src="/static/js/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/static/js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript
    <script src="/static/js/clean-blog.js"></script> -->

</div>
</body>

</html>

