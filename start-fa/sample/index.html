
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="اسناد راهنما برای شروع کار با میرا">
    <meta name="author" content="kiavash">

    <title>یک مثال جامع - راهنمای میرا</title>

    <!-- Bootstrap Core CSS -->
    <link href="/static/mira-doc/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/static/mira-doc/style-rtl.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/vazir-font/v7.0.0/dist/font-face.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/samim-font/v1.0.2/dist/font-face.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/shabnam-font/v1.1.0/dist/font-face.css">
    <link href="/static/mira-theme/fonts/font-sahel/css/font-sahel.css" rel="stylesheet" type="text/css">
    <link href="/static/mira-theme/fonts/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
<div class="custom-rtl">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
              <div class="brand-centered">
                <a class="navbar-brand" href="/"><img src="/static/img/mira-c.png" class="img-responsive mira-header" alt="mira"></a>
              </div>
            </div>


                       <!-- Collect the nav links, forms, and other content for toggling
           <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
             <ul class="nav navbar-nav navbar-right">
               
                 <li>
                     <a href="http://localhost:80" name="اسناد راهنما برای شروع کار با میرا">راهنمای میرا</a>
                 </li>
               
                 <li>
                     <a href="http://localhost:80" name="چهارچوب مدیریت یکپارچه محتوا برای ساختن وبسایت‌های چندگانه">میرا</a>
                 </li>
               
             </ul>
           </div>
            /.navbar-collapse -->


        </div>

  </nav>


<!-- Main Content -->
<div class="container">
  <div class="row">
    <div class="col-lg-7 col-lg-offset-1 col-md-8">
      
      <a name="یک مثال جامع"></a>
         <h2><a href="/start-fa/sample/">یک مثال جامع</a></h2>
         <a name="more"></a><br><h3>پیش فرض‌ها</h3>

<p>برای نوشتن این مثال‌ با این فرض پیش می‌رویم که قصد داریم چهار سایت در کنار هم داشته باشیم:</p>

<p>۱- وبلاگ به زبان فارسی (fablog) <br />
۲- وبلاگ به زبان انگلیسی (enblog) <br />
۳- یک سایت برای نوشتن داستان‌ها (story) <br />
۴- یک سایت برای نوشتن درمورد کتاب‌هایی که خوانده‌ایم (books)  </p>

<p>در طول این راهنما سعی میکنیم این چهار سایت را در کنار هم در میرا بسازیم، تنظیم کنیم، قالب دهی کنیم و در نهایت منتشر کنیم</p>

<h3>تغییر فیلدهای پیش فرض</h3>

<p>فرض کنیم که برای هر نوشته در وبلاگ فارسی تصمیم داریم یک عکس اختصاصی برای سر برگ در نظر بگیریم و آن را در هدر در فیلدی به اسم thumb مشخص کنیم. <br />
در وبلاگ انگلیسی در مورد سفرهایمان بنویسیم و با فیلد location بخواهیم مکانی که پست را نوشته‌ایم جدا از بدنه اصلی پست معرفی کنیم. <br />
در مورد داستان‌هایمان تنها میخواهیم آن‌ها را دسته بندی موضوعی بر اساس categotire کنیم. <br />
در مورد کتاب‌ها هم میخواهیم ژانر، نام نویسنده یا اگر ترجمه شده باشد نام مترجم و نام ناشر آن‌ها را در فیلدهایی مجزا با نام های genre و bookauthor و publisher مشخص کنیم. که برای نام ژانر ممکن است بیشتر از یک مورد بخواهیم مشخص کنیم.  </p>

<p>در این صورت میتوانیم هر بارکه پست جدیدی را با دستور new میسازیم، موارد مورد نیاز را به هدر اضافه یا حذف کنیم. اما احتمالاً اینکار سخت خواهد بود، شاید یک بار فراموش کنیم فیلدی را اضافه کنیم یا با غلط املایی آن را تایپ کنیم یا هر چیز دیگری، اما راه حل برای اجتناب از این تکرار چیست؟ <br />
جواب استفاده کردن از شاخه‌ی <strong>structure</strong> است.</p>

<p>هر بار که پستی را مینویسید، این فیلدها به شکل پیش‌فرض در هدر آن قرار میگیرند:</p>

<pre><code>utid
date
title
_index
author
_markup
</code></pre>

<p>برای فیلدهایی اضافه بر این‌ها میرا در شاخه‌ی structure برنامه ابتدا به دنبال نام فایلی هم نام با نام طبقه شما میگردد، اگر این فایل موجد باشد، به جز فیلدهایی که بالا نوشته شدند، محتوییات آن فایل نیز به هدر شما اضافه میشود، اگر این فایل موجود نبود، برای محتویات آن طبقه برنامه از فایل default استفاده میکند.</p>

<p>بر میگردیم به مثال پیش‌فرض برای ساختن چهار سایت خودمان. <br />
چهار فایل در شاخه‌ی structure همنام بانام سایت‌ها میسازیم</p>

<pre><code>structure/books
structure/enblog
structure/fablog
structure/story
</code></pre>

<p>محتوای هر یک از این چهار فایل را به این صورت مشخص میکنیم:</p>

<p>فایل books:</p>

<pre><code>genre:
  -
bookauthor:
publisher:
</code></pre>

<p>فایل enblog:</p>

<pre><code>categories:
  -
tags:
  -
location:
</code></pre>

<p>فایل fablog:</p>

<pre><code>categories:
  -
tags:
  -
thumb:
</code></pre>

<p>فایل story:</p>

<pre><code>categories:
  -
</code></pre>

<p>حالا محتویات شاخه استراکچر این‌ها خواهند بود</p>

<pre><code>YOUR_Mira/structure/
.
│
├── books
├── default
├── enblog
├── fablog
└── story
</code></pre>

<p>حالا اگر در طبقه books یک پست جدید ایجاد کنیم:</p>

<pre><code>mira new -t hyperion -f books
</code></pre>

<p>با فایلی شبیه به این روبرو خواهیم شد</p>

<pre><code>---
utid: 20170225192330
date: 2017-02-25 19:23:30
title: hyperion
_index:
genre:
  -
bookauthor:
publisher:
author: YOUR_NAME
_markup: markdown
---
</code></pre>

<p>حالا اولین پست خودمان را با ویرایش این فایل مینویسیم</p>

<pre><code>---
utid: 20170225192330
date: 2017-02-25 19:23:30
title: هایپریون
_index: hyperion
genre:
  - فانتزی
  - علمی-تخیلی
  - فضا
bookauthor: دن سیمونز
publisher: Bantam Spectra
author: kiavash
_markup: markdown
---
هایپریون (Hyperion)، رمانی علمی–تخیلی از دن سیمونز است که اولین‌بار در سال ۱۹۸۹ به چاپ رسید و اولین کتاب از سری چهارگانهٔ سرودهای هایپریون است. کتاب سقوط هایپریون که دنبالهٔ این کتاب است در سال ۱۹۹۰ به چاپ رسید.
این کتاب موفق شد جوایز هوگو و لوکس را در سال ۱۹۹۰ از آن خود کند و نامزد سال ۱۹۹۰ جایزهٔ علمی‌تخیلی انگلیس و نامزد سال ۱۹۹۲ جایزهٔ آرتور سی. کلارک شود.
</code></pre>

<h3>تنظیم کردن اختصاصی برای هر چهار پست</h3>

<p>حالا که فیلدهای مناسب برای هر پست را داریم، نیاز داریم که در تنظیمات مشخص کنیم که از چه قالبی برای پوسته استفاده میکنیم، چه قالب زمانی برای هرکدام در نظر داریم، آرشیو ها بر اساس کدام فیلدها ساخته شوند و …  </p>

<h3>فرضیات برای تنظیم سایت کتاب‌ها:</h3>

<ul>
<li>برای سایت کتاب‌هایمان میخواهیم کتاب‌ها بر اساس ژانر و نام نویسنده هم آرشیو شوند  </li>
<li>میخواهیم آدرس صفحه‌های آرشیو هم که از فیلدهای فارسی در آن‌ها استفاده شده به انگلیسی باشند  </li>
<li>تاریخ ها را به جلالی و هجری شمسی هم داشته باشیم  </li>
<li>آدرس فایل‌ها هم بر اساس نام نویسنده ساخته شوند  </li>
<li>از پوسته ای که در شاخه‌ی template با نام bookblog وجود دارد استفاده کنیم  </li>
</ul>

<p>در شاخه‌ی config فایلی به اسم books.yml میسازیم</p>

<pre><code>mira_start/config/book.yml
</code></pre>

<p>محتویات آن را به این صورت مینویسیم</p>

<pre><code>title: کتاب‌ها
description: هر چیزی در مورد کتاب‌هایی که میخوانم

author: اسم من
email: email@address.com

url: https://mysite.com/books/
root: /books/

static: /static/books
imageurl: /static/books/img

permalink: :bookauthor/:title/

date_format: jalali

default_markup: markdown

post_num: 5
archive_post_num: 25

template: bookblog

lists:
 - genre
 - bookauthor

namespace:
  فانتزی: fantasy
  کتاب: book
  درباره: about
  علمی تخلی: science fiction
  فضا: space
  دن سیمونز: dan simons

disqus_shortname: DISQUS SHORTNAME
</code></pre>

<p>حالا پستی که برای کتاب هایپریون نوشته بودیم هنگام انتشار در این آدرس منتشر می‌شود</p>

<pre><code>yoursite.com/books/dan-simons/hyperion/
</code></pre>

<p>و آرشیو ها هم در صفحاتی شبیه به این:</p>

<pre><code>yoursite.com/books/genre/fantasy/
</code></pre>

<p>همانطور که میبینید تمام فیلدهایی که به فارسی نوشته بودیم و در namespace مشخص کرده بودیم به انگلیسی ساخته شدند <br />
البته معقول‌تر این بود که نام نویسنده را در هدر خود فایل انگلیسی مینوشتیم یا فیلدی جدید برای نام نویسنده به انگلیسی هم داشته باشیم به جای تغییر آن در namespace، اما فعلا که در صفحات مثال هستیم و هنوز چندان نیازی به معقول بودن نداریم.</p>
      
    </div>

    <div class="col-lg-3 col-lg-offset-1 col-md-3 col-md-offset-1 sidebar">
<ul class="nav">
  <li><h2><a href="/start-fa/">راهنمای میرا</a></h2></li>
  <li><h5>اسناد راهنما برای شروع کار با میرا</h5></li>

    
      
        <h3>شروع</h3>
      
      <h5><a href="#نصب">نصب</a></h5>
<!--      <h5><a href="#/start-fa/install/">نصب</a></h5> -->
    
      
      <h5><a href="#شروع">شروع</a></h5>
<!--      <h5><a href="#/start-fa/start/">شروع</a></h5> -->
    
      
      <h5><a href="#اولین نوشته">اولین نوشته</a></h5>
<!--      <h5><a href="#/start-fa/first-post/">اولین نوشته</a></h5> -->
    
      
      <h5><a href="#اولین انتشار">اولین انتشار</a></h5>
<!--      <h5><a href="#/start-fa/first-build/">اولین انتشار</a></h5> -->
    
      
      <h5><a href="#پیش نمایش">پیش نمایش</a></h5>
<!--      <h5><a href="#/start-fa/preview/">پیش نمایش</a></h5> -->
    
    
      
        <h3>تنظیمات</h3>
      
      <h5><a href="#تنظیمات">تنظیمات</a></h5>
<!--      <h5><a href="#/start-fa/config/">تنظیمات</a></h5> -->
    
      
      <h5><a href="#استفاده از تنظیمات در قالب">استفاده از تنظیمات در قالب</a></h5>
<!--      <h5><a href="#/start-fa/configs-in-templates/">استفاده از تنظیمات در قالب</a></h5> -->
    
    
      
        <h3>محتوا</h3>
      
      <h5><a href="#مقدمه">مقدمه</a></h5>
<!--      <h5><a href="#/start-fa/content/">مقدمه</a></h5> -->
    
      
      <h5><a href="#تولید">تولید</a></h5>
<!--      <h5><a href="#/start-fa/creat/">تولید</a></h5> -->
    
      
      <h5><a href="#سربرگ">سربرگ</a></h5>
<!--      <h5><a href="#/start-fa/header/">سربرگ</a></h5> -->
    
      
      <h5><a href="#utid">utid</a></h5>
<!--      <h5><a href="#/start-fa/utid/">utid</a></h5> -->
    
      
      <h5><a href="#date">date</a></h5>
<!--      <h5><a href="#/start-fa/date/">date</a></h5> -->
    
      
      <h5><a href="#title">title</a></h5>
<!--      <h5><a href="#/start-fa/title/">title</a></h5> -->
    
      
      <h5><a href="#_index">_index</a></h5>
<!--      <h5><a href="#/start-fa/_index/">_index</a></h5> -->
    
      
      <h5><a href="#author">author</a></h5>
<!--      <h5><a href="#/start-fa/author/">author</a></h5> -->
    
      
      <h5><a href="#_markup">_markup</a></h5>
<!--      <h5><a href="#/start-fa/_markup/">_markup</a></h5> -->
    
      
      <h5><a href="#_permalink">_permalink</a></h5>
<!--      <h5><a href="#/start-fa/_permalink/">_permalink</a></h5> -->
    
      
      <h5><a href="#فیلدهای انتخابی">فیلدهای انتخابی</a></h5>
<!--      <h5><a href="#/start-fa/other-fields/">فیلدهای انتخابی</a></h5> -->
    
      
      <h5><a href="#لیست ها">لیست ها</a></h5>
<!--      <h5><a href="#/start-fa/lists/">لیست ها</a></h5> -->
    
      
      <h5><a href="#آرشیو">آرشیو</a></h5>
<!--      <h5><a href="#/start-fa/archive/">آرشیو</a></h5> -->
    
      
      <h5><a href="#استراکچر">استراکچر</a></h5>
<!--      <h5><a href="#/start-fa/structure/">استراکچر</a></h5> -->
    
      
      <h5><a href="#بدنه اصلی محتوا">بدنه اصلی محتوا</a></h5>
<!--      <h5><a href="#/start-fa/content-body/">بدنه اصلی محتوا</a></h5> -->
    
    
      
        <h3>قالب</h3>
      
      <h5><a href="#_layout">_layout</a></h5>
<!--      <h5><a href="#/start-fa/_layout/">_layout</a></h5> -->
    
      
      <h5><a href="#_type">_type</a></h5>
<!--      <h5><a href="#/start-fa/_type/">_type</a></h5> -->
    
      
      <h5><a href="#پوسته و اجزای تشکیل دهنده">پوسته و اجزای تشکیل دهنده</a></h5>
<!--      <h5><a href="#/start-fa/template/">پوسته و اجزای تشکیل دهنده</a></h5> -->
    
      
      <h5><a href="#main.tt2">main.tt2</a></h5>
<!--      <h5><a href="#/start-fa/main-template/">main.tt2</a></h5> -->
    
      
      <h5><a href="#index.tt2 و atom.tt2">index.tt2 و atom.tt2</a></h5>
<!--      <h5><a href="#/start-fa/indextemplate/">index.tt2 و atom.tt2</a></h5> -->
    
      
      <h5><a href="#archive.tt2">archive.tt2</a></h5>
<!--      <h5><a href="#/start-fa/archive-template/">archive.tt2</a></h5> -->
    
      
      <h5><a href="#post-template">post-template</a></h5>
<!--      <h5><a href="#/start-fa/post-template/">post-template</a></h5> -->
    
      
      <h5><a href="#نمایش محتوا، با استفاده از POSTS">نمایش محتوا، با استفاده از POSTS</a></h5>
<!--      <h5><a href="#/start-fa/show-posts/">نمایش محتوا، با استفاده از POSTS</a></h5> -->
    
      
      <h5><a href="#استفاده از فیلدهای فایل‌های تنظیمات در قالب">استفاده از فیلدهای فایل‌های تنظیمات در قالب</a></h5>
<!--      <h5><a href="#/start-fa/config-fields/">استفاده از فیلدهای فایل‌های تنظیمات در قالب</a></h5> -->
    
    
      
        <h3>parser</h3>
      
      <h5><a href="#پارسرهای داخلی میرا">پارسرهای داخلی میرا</a></h5>
<!--      <h5><a href="#/start-fa/parser/">پارسرهای داخلی میرا</a></h5> -->
    
      
      <h5><a href="#img">img</a></h5>
<!--      <h5><a href="#/start-fa/img-parser/">img</a></h5> -->
    
    
      
        <h3>مثال</h3>
      
      <h5><a href="#یک مثال جامع">یک مثال جامع</a></h5>
<!--      <h5><a href="#/start-fa/sample/">یک مثال جامع</a></h5> -->
    
</ul>
</div>


  </div>
</div>

<br>
    <!-- Footer -->
    <footer>
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                  <li>
                    <a href="mailto: kiavash@gmail.com">
                      <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>
                      </span>
                    </a>
                  </li>
                  <li>
                    <a href="//twitter.com/kiavash">
                      <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                      </span>
                    </a>
                  </li>
                  <li>
                    <a href="//gitlab.com/kiavash/mira">
                      <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-gitlab fa-stack-1x fa-inverse"></i>
                      </span>
                    </a>
                  </li>
                  <li>
                    <a href="//github.com/kiamazi/mira">
                      <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                      </span>
                    </a>
                  </li>
                </ul>
                <p><i class="fa fa-copyright" aria-hidden="true"></i>&nbsp; GPLv3</p>
              </div>
          </div>
      </div>
    </footer>

    <!-- jQuery -->
    <script src="/static/js/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/static/js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript
    <script src="/static/js/clean-blog.js"></script> -->

</div>
</body>

</html>

