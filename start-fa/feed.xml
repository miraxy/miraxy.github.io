<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>شروع</title>
    <description>راهنمای شروع به کار با میرا</description>
    <link>http://localhost:80</link>
    <atom:link href="http://localhost:80/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate></pubDate>
    <lastBuildDate></lastBuildDate>
    <generator>mira</generator>


      
        <item>
          <title>افزودن مشخصات نویسنده مطلب</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;اگر به یاد داشته باشید در سایت آموزش لینوکس، بیشتر از یک نویسنده برای مطالبمان داشتیم، حالا میخواهیم یک اطلاعات کلی از هرکدام را به سایدبار در زیر آرشیو نام‌هایشان اضافه کنیم، ابتدا linux-learn.yml را ویرایش میکنیم و خطوط زیر را در آن می‌نویسیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;authors:
 -
  name: farbodgame
  desc: توضیحاتی در مورد کاربر
  twitter: twitter.com/TWITTER_USER_NAME
 -
  name: MrNull
  desc: توضیحاتی در مورد کاربر
  twitter: twitter.com/TWITTER_USER_NAME
 -
  name: rmasoumvand
  desc: توضیحاتی در مورد کاربر
  twitter: twitter.com/TWITTER_USER_NAME
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
  &lt;p&gt;به فاصله‌ها دقت کنید، هر بخش که داخل رفتیم، یک خط فاصله اضافه شده است، authors در ابتدای خط است، قبل از هر خط تیره - یک space وجود دارد و یک مرحله فرورفتگی ایجاد شده و بعد، قبل از name، desc و twitter دو خط فاصله یا همان space هست، یعنی دو مرحله فرورفتگی.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;بعد قالب index.tt2 را باز کنید و در sidebar، بلوک کد {{ IF AUTHOR_ARCHIVE }} را پیدا کنید و به جای آن کدهای زیر را کپی کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ IF AUTHOR_ARCHIVE }}
&amp;lt;h3&amp;gt;author archive&amp;lt;/h3&amp;gt;
{{ FOREACH author IN AUTHOR_ARCHIVE }}
  &amp;lt;a href=&quot;{{ author.url }}&quot;&amp;gt;{{ author.name }}&amp;lt;/a&amp;gt; - &amp;lt;small&amp;gt;{{ author.posts.size }}&amp;lt;/small&amp;gt;
&amp;lt;!-- این قسمت به کد اضافه شده است --&amp;gt;
  {{ IF SITE.authors }}
  {{ FOREACH auth IN SITE.authors }}
  {{ IF author.name == auth.name }}
    &amp;lt;ul&amp;gt;
    &amp;lt;li&amp;gt;{{ auth.desc }}&amp;lt;/li&amp;gt;
    &amp;lt;li&amp;gt;&amp;lt;a href=&quot;{{ auth.twitter }}&quot;&amp;gt;twitter&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
    &amp;lt;/ul&amp;gt;
  {{ END }}
  {{ END }}
  {{ END }}
&amp;lt;!-- تا اینجا --&amp;gt;
{{ END }}
&amp;lt;hr&amp;gt;
{{ END }}
&lt;/code&gt;&lt;/pre&gt;</description>
          <pubDate>2017-04-01 22:01:50</pubDate>
          <link>/start-fa/add-author-info/</link>
          <guid isPermaLink="true">/start-fa/add-author-info/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>اضافه کردن لینک شبکه‌های اجتماعی</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;برای افزودن لینک خودمان در شبکه‌های اجتماعی به جایی مثل ساید باز هم میرویم سراغ کانفیگ‌ها و اضافه کردن چند خط به هرکدامشان&lt;/p&gt;

&lt;p&gt;فرض میکنیم لینکی که می‌خواهیم برای شبکه‌های اجتماعی در نظر بگیریم در تمام سایت‌ها ثابت نیست و برای هر سایت یک کانال، یا اکانت جدا در شبکه‌های اجتماعی و یک کانال در پیام رسان تلگرام را ساخته‌ایم.&lt;/p&gt;

&lt;p&gt;از اینجای مثال فقط برای وبلاگ فارسی همه چیز را در نظر می‌گیریم، اما می‌توانید برای سه سایت دیگر هم به همین شکل کار را انجام دهید یا کلا این همه چیز را به جای تنظیم اختصاصی هر سایت در تنظیم‌های عمومی بگنجانید و در همه‌ی سایت‌ها از همان تنظیم استفاده کنید.&lt;/p&gt;

&lt;p&gt;آدرس ها را هم این‌ها در نظر میگیریم:&lt;/p&gt;

&lt;h4&gt;وبلاگ فارسی:&lt;/h4&gt;

&lt;p&gt;twitter.com/@MY_FA_BLOG_MIRA
telegram.me/MY_FA_BLOG_MIRA&lt;/p&gt;

&lt;p&gt;حالا به blog-fa.yml  کدهای زیر را اضافه می‌کنیم:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;~/mira/config/blog-fa.yml&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;socials:
 -
  name: twitter
  url: https://twitter.com/MY_FA_BLOG_MIRA
 -
  name: instagram
  url: https://instagram.com/MY_FA_BLOG_MIRA
 -
  name: github
  url: https://github.com/MY_FA_BLOG_MIRA
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
  &lt;p&gt;به فاصله‌ها دقت کنید، هر بخش که داخل رفتیم، یک خط فاصله اضافه شده است، socials در ابتدای خط است، قبل از هر خط تیره - یک space وجود دارد و یک مرحله فرورفتگی ایجاد شده و بعد، قبل از name و url دو خط فاصله یا همان space هست، یعنی دو مرحله فرورفتگی.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;حالا در my-theme فایل index.tt2 را باز می‌کینم و هر کجا که خواستیم شبکه‌های اجتماعی را نمایش دهیم این کدها را به آن اضافه می‌کنیم، مثلا در بالاترین قسمت sidebar:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;td width=&quot;30%&quot; valign=&quot;top&quot;&amp;gt;
{{ IF SITE.socials }}
    &amp;lt;h3&amp;gt;socials&amp;lt;/h3&amp;gt;
    {{ FOREACH social IN SITE.socials }}
        &amp;lt;a href=&quot;{{ social.url }}&quot;&amp;gt;{{ social.name }}&amp;lt;/a&amp;gt;&amp;gt;ذق&amp;lt;
    {{ END }}
{{ END }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;برای هر کدام از چهار سایت دیگر هم می‌توان همین کار را تکرار کرد، یا اینکه برای همه سایت‌ها از یک آدرس مشترک در شبکه‌های اجتماعی استفاده کنیم و همه اطلاعات را در config.yml وارد کنیم، در این حالت برای نمایش لینک‌ها در سایت، به جای SITE.socials باید از MAIN.socials استفاده کرد.&lt;/p&gt;</description>
          <pubDate>2017-04-01 21:14:19</pubDate>
          <link>/start-fa/add-social-links/</link>
          <guid isPermaLink="true">/start-fa/add-social-links/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>تغییر آدرس آرشیو‌ها</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;دیدیم که در تنظیم کردن هر سایت برای آدرس‌دهی به هر پست می‌توانیم از مشخصات آن پست استفاده کنیم، برای مثال:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;permalink: :category/:title.html
یا
permalink: :author/:year/:title
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;حالا ممکن است دسته بندی موضوعی به نام &lt;strong&gt;آموزشی&lt;/strong&gt; داشته باشیم، آدرس ثابت با استفاده از مدل اول این خواهد بود:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SITE_ADDRESS.com/آموزش/post-title.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;و اگر آرشیوی بر اساس category ساخته باشیم هم آدرس مطالب دسته بندی &lt;strong&gt;آموزشی&lt;/strong&gt; این خواهد بود:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SITE_ADDRESS.com/category/آموزش/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;یا نام نویسنده مطلب محمد محمدی باشد، در مدل دوم آدرس شبیه به این ساخته خواهد شد:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SITE_ADDRESS.com/محمد-محمدی/post-title/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;و آدرس آرشیو این نویسنده:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SITE_ADDRESS.com/author/محمد-محمدی/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;یا اینکه یک دسته بندی با نام طولانی داشته باشیم، مثلا نام دسته بندی این نام باشد: learn use vim in gnu linux systems &lt;br /&gt;
آدرسذها این شکلی خواهتد بود:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;SITE_ADDRESS.com/learn-use-vim-in-gnu-linux-systems/post-title.html
و 
SITE_ADDRESS.com/category/learn-use-vim-in-gnu-linux-systems/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;شاید استفاده از نام‌های طولانی یا حروف فارسی در آدرس را دوست نداشته باشید یا سروری که از آن استفاده می‌کنید محدودیت داشته باشد برای پذیرفتن نام‌های غیر لاتین. راه حل استفاده از namespace در فایل کانفیگ عمومی یا اختصاصی هر سایت است.&lt;/p&gt;

&lt;p&gt;حالا برای تمرین این مثال، در وبلاگ فارسی یک نوشته جدید به جود بیاورید و در قسمت category مقدار آزمایش را وارید کنید.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;---
utid: 20170326160744
date: 2017-03-26 16:07:44
title: فضای نام
_index: namespace
category: آزمایش
---
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;آدرسی که به این پست اختصاص داده می‌شود:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;YOUR_ADDRESS.COM/آزمایش/a2017/03/26/namespace.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;حالا اگر میخواهید از فضای نام‌ها تمام سایت‌ها به شکل عمومی استفاده کنند در فایل config.yml و اگر میخواهید تنها در وبلاگ فارسی این فضای نام فعال باشد در فایل config/blog-fa.yml فیبدی به نام namespace را به این شکل به وجود بیاورید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;namespace:
  آزمایش: test
  آموزش: learn
  کتاب: book
  شخصی: personal
  عمومی: general
  محمد محمدی: mohamad mohamadi
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;از این به بعد میرا هرجا با یکی از این‌ها در آرشیو مواجه شود، برای ساختن آدرس آن از نام اختصاصی‌اش در فضای نام‌ها استفاده می‌کند. مثلا پست آزمایشی که کمی‌قبل‌تر ساختیم، آدرسی مشابه این آدرس خواهد گرفت:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;YOUR_ADDRESS.COM/test/2017/03/26/namespace.html
و آدرس آرشیو:
SITE_ADDRESS.com/category/test/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;یا اگر دسته بندی &lt;strong&gt;کتاب&lt;/strong&gt; داشته باشیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;YOUR_ADDRESS.COM/book/2010/10/10/post-title.html
SITE_ADDRESS.com/category/book/
&lt;/code&gt;&lt;/pre&gt;</description>
          <pubDate>2017-04-01 15:24:12</pubDate>
          <link>/start-fa/namespcae/</link>
          <guid isPermaLink="true">/start-fa/namespcae/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>آدرس‌های تکراری</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;همیشه این امکان وجود دارد که دو نوشته شما یک آدرس مشابه به خود بیرند، مخصوصا وقتی که در سیستم آدرس‌دهی برای هر نوشته، به جز تیتر آن هیچ شرط دیگری مثل تاریخ یا دسته بندی و... را ذکر نمی‌کنید، مثل کاری که در این مثال برای انتشار داستان‌ها کردیم.&lt;/p&gt;

&lt;p&gt;به هر حال همیشه این احتمال وجود دارد که دو پست آدرس یکسیانی به ود بگیرند، فرض کنیم که در فایل کانفیگ سایت فیلد permalink را به این شکل ساخته باشیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;permalink: :year/:month/:day/:title/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;و در یک روز دو پست را با این مشخصات نوشته باشیم:
&lt;code&gt;post1:&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;---
utid: 20170325151121
date: 2017/03/25
title: آزمایش
_index: test
category: آموزش
tags:
 - یک
 - دو
---
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;post2:&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;---
utid: 20170325162308
date: 2017/03/25
title: test
category: learn
tags:
 - one
 - two
---
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;هر دو پست دقیقا در یک روز منتشر شده‌اند، اولی _index با مقدار test دارد و دومی هم که index ندارد، از تیتر test استفاده کرده، پس با توجه به مقدار permalink در کانفیگ، آدرس هر دو پست این آدرس خواهد بود:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/2017/03/25/test/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;میرا برای حل این مشکل یک راه حل ساده دارد، اگر با آدرس‌های تکراری مواجه بشود، به ترتیب شماره‌ی utid آن‌ها از کوچک به بزرگ این آدرس‌ها را شماره گذاری می‌کند. پست اول عدد utid کوچک‌تری دارد، آدرس اصلی به آن تعلق می‌گیرد و پست دوم یک اندیس شماره 2 می‌گیرد، پس آدرس پست‌های ما در اصل این‌ها خواهند بود:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;post1: &amp;gt;  /2017/03/25/test/
post2: &amp;gt;  /2017/03/25/test/2/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;در صورتی هم که permalink به جای آدرس خالص، از نام فایل در آن استفاده شده باشد، مثل:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;permalink: :year/:month/:day/:title.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;آدرس‌ها به این صورت ساخته خواهند شد:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;post1: &amp;gt;  /2017/03/25/test.html
post2: &amp;gt;  /2017/03/25/2/test.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;اما اگر نخواهید میرا برای شما آدرس‌ها را بسازد، مثلا بخواهید به جای 2 از 'second edition' در آدرس استفاده کنید، می‌توانید در هدر همان پست فیلد _permalink ار مقدار دهی کنید، برای مثال میتوانیم دو پست را به این شکل داشته باشیم:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;post1:&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;---
utid: 20170325151121
date: 2017/03/25
title: آزمایش
_index: test
category: آموزش
tags:
 - یک
 - دو
---
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;post2:&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;---
utid: 20170325162308
date: 2017/03/25
title: test
_permalink: :year/:month/:day/:title/second-edition/
category: learn
tags:
 - one
 - two
---
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;یا حتی از یک فرمول به جز فرمول کانفیگ سایت استفاده کنیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;_permalink: :category/:title/second-edition/
یا
_permalink: :year/second-edition/:title/
یا
_permalink: :title/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;اگر فایل‌های این مثال را دانلود کرده باشید، در وبلاگ فارسی و داستان، دو مطلب تکراری وجود دارد که آدرس مشابه میگیرند، آن‌ها را هر طور که دوست دارید اصلاح کنید.&lt;/p&gt;</description>
          <pubDate>2017-04-01 14:24:05</pubDate>
          <link>/start-fa/duplicate-address/</link>
          <guid isPermaLink="true">/start-fa/duplicate-address/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>ساختن صفحات</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;برای ساختن صفحات ثابت جدا از روند اصلی سایت، مثل صفحه درباره یا تماس و ... با اضافه کردن فیلد type و مقدار page در هدر هر پست، آن پست را به عنوان صفحه ثابت به میرا معرفی می‌کنیم، این کار باعث میشود که پست مورد نظر از لیست‌های مطالب برای نمایش در صفحه اول یا سایر صفحه‌های سایت و page.next و page.prev برای حرکت بین پست‌ها حذف شده و تنها با وارد کردن آدرس مستقیم آن نمایش داده شود.&lt;/p&gt;

&lt;p&gt;در وبلاگ فارسی یک پست جدید بسازید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mira new -t 'about me' -f blog-fa
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;حالا آن را ویرایش کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;---
utid: 20170328195013
title: درباره من
_index: about
_type: page
_layout: page
_permalink: /:title/
---
این صفحه در باره من است، اینجا مقداری در مورد خودم توضیح می‌دهم
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;حالا در شاخه‌ی قالب my-theme یک فایل جدید به نام page بسازید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~/mira/template/my-theme/page
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;و مقادیر زیر را در آن کپی کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta charset=&quot;utf-8&quot;&amp;gt;
    &amp;lt;meta name=&quot;description&quot; content=&quot;{{ DESCRIPTION }}&quot;&amp;gt;
    &amp;lt;meta name=&quot;author&quot; content=&quot;{{ MainAUTHOR }}&quot;&amp;gt;
    &amp;lt;link rel=&quot;shortcut icon&quot; href=&quot;{{ MAIN.author_image }}&quot;&amp;gt;
    &amp;lt;title&amp;gt;{{ PageTITLE }}&amp;lt;/title&amp;gt;
    &amp;lt;style&amp;gt;
    img {
    max-width: 100% !important;
    }
    {{ IF SITE.lang == 'fa' }}
    body {
       direction: rtl;
    }
    {{ END }}
    {{ IF SITE.lang == 'en' }}
    body {
       direction: ltr;
    }
    {{ END }}
    &amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;center&amp;gt;
    &amp;lt;img src=&quot;{{ SITE.author_image }}&quot;&amp;gt;
    &amp;lt;h1&amp;gt;{{ post.title }}&amp;lt;/h1&amp;gt;
    &amp;lt;/center&amp;gt;
    &amp;lt;hr&amp;gt;
    &amp;lt;table&amp;gt;
    &amp;lt;tr&amp;gt;
    &amp;lt;td&amp;gt;
      &amp;lt;p&amp;gt;{{ post.body.more }}&amp;lt;/p&amp;gt;
    &amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
    &amp;lt;/table&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;این پست در صفحه اصلی یا هیچ‌کجای دیگر سایت نمایش داده نخواهد شد، تنها راه دسترسی به آن دادن لینک مستقیم به این صفحه در این آدرس است:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/blog/about/
&lt;/code&gt;&lt;/pre&gt;</description>
          <pubDate>2017-03-28 19:50:13</pubDate>
          <link>/start-fa/pages/</link>
          <guid isPermaLink="true">/start-fa/pages/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>پوسته‌های بیشتر برای هر قالب و تغییر آدرس</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;پیش از این گفتیم که علاوه بر پنج فایل پایه‌ی هر قالب، میتوان به هر تعداد دیگر پوسته برای یک قالب تعریف کرد. در میرا می‌توان برای هر آرشیو یا هر پست یک قالب مجزا داشت.&lt;/p&gt;

&lt;h4&gt;پوسته‌های متفاوت برای هر آرشیو&lt;/h4&gt;

&lt;p&gt;برای داشتن پوسته‌ی متفاوت برای هر آرشیو، کافی است هم‌نام با آن آرشیو یک فایل در دایرکتوری قالب‌مان داشته باشیم.&lt;/p&gt;

&lt;p&gt;برای مثال اگر بخواهیم پوسته‌ی آرشیو category با سایر آرشیوها مثل tags یا آرشیوزمانی و... متفاوت باشد، تنها کافی است در دایرکتوری قالب، یک فایل جدید به نام category.tt2 بسازیم، از این به بعد در هر سایت که آرشیوی به این نام وجود داشت، به جای استفاده از archive.tt2، با استفاده از category.tt2 خروجی آن تولید می‌شود.&lt;/p&gt;

&lt;h4&gt;پوسته‌های متفاوت برای پست ها&lt;/h4&gt;

&lt;p&gt;گاهی اوقات نیاز داریم آدرس ثابت یک نوشته با سایر نوشته‌ها متفاوت باشد، مثلا برای ساختن page ها یا هر دلیل دیگر. برای این‌که به میرا بگوییم به جای post.tt2 از پوسته‌ی دیگری برای ساختن خروجی یک پست استفاده کند، باید در سربرگ آن پست به فیلد _layout مقدار بدهیم. برای مثال:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;_layout: custom_post_template
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;نکته&lt;/strong&gt;: &lt;br /&gt;
برخلاف سایر پوسته‌ها، برای صفحات تعریف شده به عنوان پوسته‌ی اختصاصی پست‌ها، الزامی به استفاده از پسوند tt2 برای ساختن پوسته نداریم. استفاده کردن از پسوند تنها در این حالت اختیاری است.&lt;/p&gt;

&lt;h4&gt;تغییر آدرس&lt;/h4&gt;

&lt;p&gt;همچنین می‌توان آدرس انتشار یک پست را از فرمت تعیین شده در فایل کانفیگ اختصاصی سایتی که در آن منتشر می‌شود جدا کرد. برای مثال در فایل blog-fa.yml به فیلد permalink این مقدار را داده بودیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;:year/:month/:day/:title.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;اما اگر در سربرگ هر کدام از پست‌ها فیلد _permalink را مقدار دهی کنیم، این مسیر تنها برای آن پست تغییر میکند:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;_permalink: :year/:title/
یا
_permalink: /:title/
یا
_permalink: some/thing/else/:title.php
&lt;/code&gt;&lt;/pre&gt;</description>
          <pubDate>2017-03-28 20:00:43</pubDate>
          <link>/start-fa/more-templates/</link>
          <guid isPermaLink="true">/start-fa/more-templates/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>مرتب کردن چیدمان</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;اگر تا این مرحله دستور build را اجرا نکردید، حتما یک بار آن را امتحان کنید&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mira build
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;و بعد یک پیش نمایش از سایت را برای خود اجرا کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mira view
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;حالا به این آدرس بروید:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;//127.0.0.1:5000/blog/&quot;&gt;127.0.0.1:5000/blog/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;می‌بینید که همه نوشته‌ها چپ به راست نوشته شده‌اند و اصلا برای نمایش زبان فارسی مناسب نیستند.&lt;/p&gt;

&lt;p&gt;همانطور که در تنظیم پیکربندی دیدید، در تنظیم هر سایت یک فیلد به نام lang را ساخته بودیم، حالا زمان استفاده از آن است.&lt;/p&gt;

&lt;p&gt;برای راست‌چین کردن محتوای فارسی از یک شرط IF و مقدار فیلد lang در فایل config اختصاصی هر سایت استفاده میکنیم.&lt;/p&gt;

&lt;p&gt;استفاده از مقدار فایل‌های config اختصاصی طبقات در قالب main و سایر قالب‌ها با هم متفاوت است. برای اینکه از این مقادیر در main استفاده کنیم، حتما باید داخل حلقه‌ی FLOORS باشیم، اما در سایر قالب‌ها در هر جای قالب که باشیم قابل دسترسی هستند.&lt;/p&gt;

&lt;p&gt;برای اینکه تنوع استفاده و روش‌های متفاوت استفاده از بلوک‌های شرطی IF را ببینید، با دو روش متفاوت این مثال را پیش می‌بریم. انتخاب روش دلخواه با خود شماست.&lt;/p&gt;

&lt;p&gt;یک بار دیگر فایل main.tt2 را باز کنید و به حلقه‌ی FOREACH FLOORS این کدها را اضافه کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ IF site.SITE.lang == 'fa' }}
   &amp;lt;div dir=&quot;rtl&quot;&amp;gt;
{{ ELSE }}
   &amp;lt;div&amp;gt;
{{ END }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;حالا باید نتیجه چیزی شبیه به این شده باشد:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ FOREACH site IN FLOORS.values.sort('name') }}
  &amp;lt;td style=&quot;border-right: 1px solid black; width: 25%;&quot; valign=&quot;top&quot;&amp;gt;
     {{ IF site.SITE.lang == 'fa' }}   &amp;lt;!-- add --&amp;gt;
    &amp;lt;div dir=&quot;rtl&quot;&amp;gt;                &amp;lt;!-- add --&amp;gt;
     {{ ELSE }}                        &amp;lt;!-- add --&amp;gt;
    &amp;lt;div&amp;gt;                          &amp;lt;!-- add --&amp;gt;
     {{ END }}                         &amp;lt;!-- add --&amp;gt;
  &amp;lt;h2&amp;gt;&amp;lt;a href=&quot;{{ site.root }}&quot;&amp;gt;{{ site.name }}&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
  &amp;lt;p&amp;gt;{{ site.description }}&amp;lt;/p&amp;gt;
  &amp;lt;hr&amp;gt;
  &amp;lt;ul&amp;gt;
  {{ FOREACH post IN site.posts }}
    &amp;lt;li&amp;gt;&amp;lt;h4&amp;gt;&amp;lt;a href=&quot;{{ post.url }}&quot;&amp;gt;{{ post.title }}&amp;lt;/a&amp;gt;&amp;lt;h4&amp;gt;&amp;lt;/li&amp;gt;
    {{ post.body.less }}
  {{ END }}
  &amp;lt;/ul&amp;gt;
     &amp;lt;/div&amp;gt;                            &amp;lt;!-- add --&amp;gt;
  &amp;lt;/td&amp;gt;
{{ END }} 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;حالا فایل‌های post.tt2، archive.tt2 و index.tt2 را باز کنید و این شرط را در قسمت head سایت به style اضافه کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ IF SITE.lang == 'fa' }}
body {
   direction: rtl;
}
{{ END }}
{{ IF SITE.lang == 'en' }}
body {
   direction: ltr;
}
{{ END }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;حالا head باید به این شکل در آمده باشد:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;head&amp;gt;
    &amp;lt;meta charset=&quot;utf-8&quot;&amp;gt;
    &amp;lt;meta name=&quot;description&quot; content=&quot;{{ DESCRIPTION }}&quot;&amp;gt;
    &amp;lt;meta name=&quot;author&quot; content=&quot;{{ MainAUTHOR }}&quot;&amp;gt;
    &amp;lt;link rel=&quot;shortcut icon&quot; href=&quot;{{ MAIN.author_image }}&quot;&amp;gt;
    &amp;lt;title&amp;gt;{{ PageTITLE }}&amp;lt;/title&amp;gt;
    &amp;lt;style&amp;gt;
    entry img {
    max-width: 100% !important;
    }
    {{ IF SITE.lang == 'fa' }}
    body {
       direction: rtl;
    }
    {{ END }}
    {{ IF SITE.lang == 'en' }}
    body {
       direction: ltr;
    }
    {{ END }}
    &amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;نکته&lt;/strong&gt;: برای استفاده از IF به جز ELSE از ELSIF هم می‌توانید استفاده کنید.&lt;/p&gt;</description>
          <pubDate>2017-03-28 20:08:44</pubDate>
          <link>/start-fa/layout/</link>
          <guid isPermaLink="true">/start-fa/layout/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>تکمیل کردن قالب post</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;زمانی که داشتیم سربرگ‌ها را تنظیم می‌کردیم برای سایت داستان ها یا همان دنباله دار، یک فیلد به نام suggests برای نمایش دادن داستان‌های مشابه تعریف کردیم که تا اینجا از آن استفاده نکردیم، حالا وقت آن رسیده که این فلد را هم به قالبمان اضافه کنیم.&lt;/p&gt;

&lt;p&gt;در فایلی که برای محتوا دانلود کردید، به این شاخه‌ی story بروید و این دو فایل را باز کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~/mira/content/story/1394-12-11-the-selfish-gene.md
~/mira/content/story/1395-2-27-sleep.md
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;در فایل sleep در فیلد suggests آدرس ایستای دو داستان دیگر وارد شده، برای نمایش دادن آن می‌توان از کدی شبیه به این استفاده کرد:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ FOREACH suggest IN post.suggests }}
    {{ FOREACH entry IN ENTRIES.values }}
        {{ IF entry.url == suggest }}
            &amp;lt;a href=&quot;{{ entry.url }}&quot;&amp;gt;{{ entry.title }}&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        {{ END }}
    {{ END }}
{{ END }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;در یک حلقه مقدار هر آدرس را در suggest لود کردیم، سپس در حلقه‌ی درونی تمام پست‌ها را گشتیم، اگر پستی که آدرس مشابه با suggest داست، نام و آدرس آن را نمایش دادیم.&lt;/p&gt;

&lt;p&gt;در فایل the-selfish-gene اما utid دو داستان را برای suggests وارد کردیم، برای نمایش دادنشان از کدهای زیر می‌توان استفاده کرد:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ FOREACH suggest IN post.suggests }}
    {{ IF ENTRIES.$suggest.url }}
        &amp;lt;a href=&quot;{{ ENTRIES.$suggest.url }}&quot;&amp;gt;{{ ENTRIES.$suggest.title }}&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
    {{ END }}
{{ END }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;باز هم در یک حلقه suggets های هر پست را می‌خوانیم، اما اینبار نیازی به حلقه‌ی درونی نیست، فقط تست میکنیم آیا پستی با این utid وجود دارد یا نه، اگر وجود داشت، نام و آدرس آن را نمایش می‌دهیم.&lt;/p&gt;

&lt;p&gt;برای اینکه از هر دو روش همزمان در قالب استفاده کنیم، یک بار دیگر فایل post.tt2 را برای ویرایش کردن باز کنید، این چند خط را پیدا کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ IF post.keywords }}
keywords: {{ FOREACH kw IN post.keywords }}{{ kw }}/{{ END }}&amp;lt;br&amp;gt;
{{ END }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;کد زیر را بعد از آن اضافه کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ IF post.suggests }}
    &amp;lt;hr/&amp;gt;
&amp;lt;p&amp;gt;suggests:&amp;lt;/p&amp;gt;
{{ FOREACH suggest IN post.suggests }}
    {{ IF ENTRIES.$suggest.url }}
        &amp;lt;a href=&quot;{{ ENTRIES.$suggest.url }}&quot;&amp;gt;{{ ENTRIES.$suggest.title }}&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
    {{ END }}
    {{ FOREACH entry IN ENTRIES.values }}
    {{ IF entry.url == suggest }}
            &amp;lt;a href=&quot;{{ entry.url }}&quot;&amp;gt;{{ entry.title }}&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
        {{ END }}
    {{ END }}
{{ END }}
{{ END }}
&lt;/code&gt;&lt;/pre&gt;</description>
          <pubDate>2017-03-28 19:34:44</pubDate>
          <link>/start-fa/post-subjoin/</link>
          <guid isPermaLink="true">/start-fa/post-subjoin/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>ساختن یک ساید بار</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;حالا وقت آن رسیده که با ساختن یک ساید بار آرشیوهایی که برای هر سایت را داشتیم را هم به نمایش درآوریم، برای این کار قبلا در میانه‌های قالب‌های index، archive و post یک قسمت را آماده گذشاته بودیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!-- sidebar --&amp;gt;
&amp;lt;td width=&quot;30%&quot;&amp;gt;
&amp;lt;/td&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;حالا زمان آن را رسیده که آن را تکمیل کنیم. برای نمایش لیست‌های آرشیو دو راه حل داریم، یکی به شکل کلی تمام آرشیوهای موجود را لود کنیم، مانند کاری که در انتهای قالب atom کرده بودیم، و یکی هم مثل قالب post، روشی که به ما امکان میدهد هر لیست را جدا و در جایی که میخواهیم نمایش دهیم.&lt;/p&gt;

&lt;h4&gt;روش اول، لود کردن همه چیز:&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;{{ FOREACH archive IN ARCHIVES.pairs }}
  &amp;lt;h5&amp;gt;{{ archive.key }}&amp;lt;/h5&amp;gt;&amp;lt;!-- archive name, like tags or dates ... --&amp;gt;
  &amp;lt;hr&amp;gt;
  {{ FOREACH item IN archive.value.values.sort('name').sort('number') }}
    &amp;lt;a href=&quot;{{ item.url }}&quot;&amp;gt;{{ item.name }}&amp;lt;/a&amp;gt;
    {{ IF (archive.key == 'categories') }}&amp;lt;br&amp;gt;{{ END }}
    {{ IF (archive.key == 'date') or (archive.key == 'jdate') }}&amp;lt;br&amp;gt;{{ END }}
    {{ IF (archive.key == 'author') }}&amp;lt;br&amp;gt;{{ END }}
    {{ IF (loop.index != loop.max) and (archive.key == 'tags') }}&amp;amp;nbsp;-&amp;amp;nbsp;{{ END }}
    {{ IF (archive.key == 'category') }}
    &amp;lt;br&amp;gt;
    {{ FOREACH utid IN item.posts }}
        &amp;amp;nbsp;&amp;amp;nbsp;-&amp;amp;nbsp;&amp;lt;a href=&quot;{{ ENTRIES.$utid.url }}&quot;&amp;gt;{{ ENTRIES.$utid.title }}&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
    {{ END }}
    {{ END }}
  {{- END }}
  &amp;lt;br&amp;gt;
{{- END }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;توضیح:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ابتدا یک جفت کلید-مقدار از آرشیوها را در متغیری به نام archive لود کردیم archive IN ARCHIVES.pairs، کلید با نام key حاوی نام آرشیو است، مثل category یا tag یا هر چیز دیگری {{ archive.key }}.&lt;/p&gt;

&lt;p&gt;مقدار یا value حاوی یک لیست از اطلاعات مربوط به آن آرشیو است archive.value، که این لیست شامل این اطلاعات است: نام، آدرس لینک هر آرشیو، و utid پست‌هایی که در این آرشیو هستند. مثل همیشه، برای نمایش دادن لیست‌ها از FOREACH استفاده می‌کینم.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ FOREACH item IN archive.value.values.sort('name').sort('number') }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;و البته با استفاده از sort، ترتیب نمایش را هم مشخص کردیم که بر اساس نام باشد و اگر نام‌های مشابه پیدا کرد، اولویت با تعداد پست‌های موجود در هرکدام باشد.&lt;/p&gt;

&lt;p&gt;بعد هم با استفاده از شرط‌ها، جداکننده‌های هر آرشیو را مشخص کردیم. مثلا برای آرشیوهای زمانی، نام هر ماه در یک خط جدید باشد، یا برای نمایش تگ‌ها همه پشت سر هم و با جداکننده‌ی - باشند.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;خطوط ۱۰ تا ۱۵&lt;/strong&gt;: گفتیم که مقدار هر آرشیو لیستی است که utid پست‌هایی که در آن دسته بندی هستند را هم در خود دارد، بین این خطوط مشخص کردیم تیتر و لینک تمام نوشته‌هایی که در دسته بندی هستند، زیر نام آن دسته بندی نمایش داده شوند.با استفاده از ENTRIES.$utid تمام کارهایی که برای نمایش پست ها با POSTS انجام میدادیم را میتوان انجام داد، مثلا خلاصه‌ی متن را لود کرد:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ENTRIES.$utid.body.less
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;روش دوم، نمایش دادن با ترتیب دلخواه&lt;/h4&gt;

&lt;p&gt;روش بالا روش خوبی است، مخصوصا برای زمانی که میخواهیم از یک قالب به شکل مشترک استفاده کنیم اما قدرت کنترل و انعطاف کمی دارد، مثلا شاید بخواهیم در یک سایت آرشیو زمانی در ابتدای ستون کناری باشد و در یک سایت در انتها. در این روش میتوانیم هر آرشیو را هرکجا که بخواهیم لود کنیم. کافی است حلقه‌ای با نام آرشیو و پسوند آرشیو با حروف بزرگ را لود کنیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ IF CATEGORIES_ARCHIVE }}
&amp;lt;h3&amp;gt;categories archive&amp;lt;/h3&amp;gt;
{{ FOREACH cat IN CATEGORIES_ARCHIVE }}
  &amp;lt;a href=&quot;{{ cat.url }}&quot;&amp;gt;{{ cat.name }}&amp;lt;/a&amp;gt; - &amp;lt;small&amp;gt;{{ cat.posts.size }}&amp;lt;/small&amp;gt;&amp;lt;br&amp;gt;
{{ END }}
{{ END }}
&amp;lt;hr&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;نکته‌&lt;/strong&gt;: همانطور که در مثال قبل هم گفتیم، لیست‌های آرشیو علاوه بر نام و آدرس، پست‌هایی که در دسته بندیشان قرار میگیرد را هم در خود دارند، در مثال قبل با استفاده از posts مقدار utid ها را به دست آوردیم و در ENTRIES لود کردیم، اینجا فقط تعدادشان را گرفتیم و مشخص کردیم در هر دسته بندی چه تعداد نوشته داریم. {{ cat.posts.size }}&lt;/p&gt;

&lt;p&gt;برای نمایش کامل تمام آرشیوها در این مثال باید از کد زیر استفاده کرد، در این مثال هم در قسمت category تمام پست ها را با استفاده از utid نمایش می‌دهیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ IF CATEGORIES_ARCHIVE }}
&amp;lt;h3&amp;gt;categories archive&amp;lt;/h3&amp;gt;
{{ FOREACH cat IN CATEGORIES_ARCHIVE }}
   &amp;lt;a href=&quot;{{ cat.url }}&quot;&amp;gt;{{ cat.name }}&amp;lt;/a&amp;gt; - &amp;lt;small&amp;gt;{{ cat.posts.size }}&amp;lt;/small&amp;gt;&amp;lt;br&amp;gt;
{{ END }}&amp;lt;hr&amp;gt;
{{ END }}

{{ IF CATEGORY_ARCHIVE }}
&amp;lt;h3&amp;gt;category archive&amp;lt;/h3&amp;gt;
{{ FOREACH cat IN CATEGORY_ARCHIVE }}
  &amp;lt;a href=&quot;{{ cat.url }}&quot;&amp;gt;{{ cat.name }}&amp;lt;/a&amp;gt; - &amp;lt;small&amp;gt;{{ cat.posts.size }}&amp;lt;/small&amp;gt;&amp;lt;br&amp;gt;
    &amp;lt;br&amp;gt;
    {{ FOREACH utid IN cat.posts }}
        &amp;amp;nbsp;&amp;amp;nbsp;-&amp;amp;nbsp;&amp;lt;a href=&quot;{{ ENTRIES.$utid.url }}&quot;&amp;gt;{{ ENTRIES.$utid.title }}&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;
    {{ END }}
{{ END }}
&amp;lt;hr&amp;gt;
{{ END }}

{{ IF TAGS_ARCHIVE }}
&amp;lt;h3&amp;gt;categories archive&amp;lt;/h3&amp;gt;
{{ FOREACH tag IN TAGS_ARCHIVE }}
  &amp;lt;a href=&quot;{{ tag.url }}&quot;&amp;gt;{{ tag.name }}&amp;lt;/a&amp;gt; - &amp;lt;small&amp;gt;{{ tag.posts.size }}&amp;lt;/small&amp;gt;&amp;lt;br&amp;gt;
{{ END }}
&amp;lt;hr&amp;gt;
{{ END }}

{{ IF AUTHOR_ARCHIVE }}
&amp;lt;h3&amp;gt;author archive&amp;lt;/h3&amp;gt;
{{ FOREACH author IN AUTHOR_ARCHIVE }}
  &amp;lt;a href=&quot;{{ author.url }}&quot;&amp;gt;{{ author.name }}&amp;lt;/a&amp;gt; - &amp;lt;small&amp;gt;{{ author.posts.size }}&amp;lt;/small&amp;gt;&amp;lt;br&amp;gt;
{{ END }}
&amp;lt;hr&amp;gt;
{{ END }}

{{ IF DATE_ARCHIVE }}
&amp;lt;h3&amp;gt;date archive&amp;lt;/h3&amp;gt;
{{ FOREACH date IN DATE_ARCHIVE }}
  &amp;lt;a href=&quot;{{ date.url }}&quot;&amp;gt;{{ date.name }}&amp;lt;/a&amp;gt; - &amp;lt;small&amp;gt;{{ date.posts.size }}&amp;lt;/small&amp;gt;&amp;lt;br&amp;gt;
{{ END }}
&amp;lt;hr&amp;gt;
{{ END }}

{{ IF JDATE_ARCHIVE }}
&amp;lt;h3&amp;gt;jalali archive&amp;lt;/h3&amp;gt;
{{ FOREACH date IN JDATE_ARCHIVE }}
  &amp;lt;a href=&quot;{{ date.url }}&quot;&amp;gt;{{ date.name }}&amp;lt;/a&amp;gt; - &amp;lt;small&amp;gt;{{ date.posts.size }}&amp;lt;/small&amp;gt;&amp;lt;br&amp;gt;
{{ END }}
&amp;lt;hr&amp;gt;
{{ END }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;یکی از دو روش بالا را انتخاب کنید، سپس کدهای نوشته شده را در قالب‌های post, index و archive کپی کنید&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!-- sidebar --&amp;gt;
&amp;lt;td width=&quot;30%&quot;&amp;gt;
   &amp;gt;&amp;gt;&amp;gt; اینجا کپی کنید
&amp;lt;/td&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;در فایل‌های مثال که برای دانلود کردن آماده شده از روش اول در قالب archive و روش دوم برای index و post استفاده شده.&lt;/p&gt;</description>
          <pubDate>2017-03-28 19:28:03</pubDate>
          <link>/start-fa/sidebar/</link>
          <guid isPermaLink="true">/start-fa/sidebar/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>feed template</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;آخرین فایل atom.tt2 که برای ساختن فید مطالب هر سایت به کار می‌رود، البته میتوانید با هر یک از استانداردهای مورد قبول که دوست دارید فید خود را بسازید و الزامی به atom بودن آن نیست، نهایتا خروجی این فایل، فایل feed.xml در شاخه اصلی هر سایت خواهد بود.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;rss version=&quot;2.0&quot; xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot;&amp;gt;
  &amp;lt;channel&amp;gt;
    &amp;lt;title&amp;gt;{{ TITLE }}&amp;lt;/title&amp;gt;
    &amp;lt;description&amp;gt;{{ DESCRIPTION }}&amp;lt;/description&amp;gt;
    &amp;lt;link&amp;gt;{{ URL }}&amp;lt;/link&amp;gt;
    &amp;lt;atom:link href=&quot;{{ URL }}/feed.xml&quot; rel=&quot;self&quot; type=&quot;application/rss+xml&quot; /&amp;gt;
    &amp;lt;pubDate&amp;gt;{{ Build.date }}&amp;lt;/pubDate&amp;gt;
    &amp;lt;lastBuildDate&amp;gt;{{ DATE }}&amp;lt;/lastBuildDate&amp;gt;
    &amp;lt;generator&amp;gt;mira&amp;lt;/generator&amp;gt;
    {{ FOREACH post IN POSTS }}
        &amp;lt;item&amp;gt;
          &amp;lt;title&amp;gt;{{ post.title }}&amp;lt;/title&amp;gt;
          &amp;lt;description&amp;gt;{{ post.body.more | html }}&amp;lt;/description&amp;gt;
          &amp;lt;pubDate&amp;gt;{{ post.date }}&amp;lt;/pubDate&amp;gt;
          &amp;lt;link&amp;gt;{{ post.url }}&amp;lt;/link&amp;gt;
          &amp;lt;guid isPermaLink=&quot;true&quot;&amp;gt;{{ post.url }}&amp;lt;/guid&amp;gt;
    {{- FOREACH list IN SITE.lists -}}
        {{ IF post.$list }}
        &amp;lt;{{ list }}&amp;gt;
           {{- FOREACH arch IN post.$list.values -}}
            {{- arch.name -}}
            {{- IF (loop.index != loop.max) -}},{{- END -}}
           {{- END -}}
        &amp;lt;/{{ list }}&amp;gt;
        {{ END }}
    {{- END -}}
        &amp;lt;/item&amp;gt;
    {{ END }}
  &amp;lt;/channel&amp;gt;
&amp;lt;/rss&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;نکته&lt;/strong&gt;: در این قالب چند نکته جدید را می‌بینید، یکی برچسب BUILD که اطلاعات زمان اجرای فرمان build را در خود دارد، مانند CALENDAR برای هر پست&lt;/p&gt;

&lt;p&gt;و دیگری استفاده جدید از حلقه ها و متغیرهای آن‌ها، خط هجده را ببینید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{- FOREACH list IN SITE.lists -}}
        {{ IF post.$list }}
    ...
    ...
       {{- FOREACH arch IN post.$list.values -}}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;در حلقه‌ی اول هر لیستی را که در فایل تنظیمات سایت تنظیم کرده‌ایم را چک می‌کند و از این به بعد با استفاده از علامت $ به جای {{}} میتوانیم از مقدار متغیر در کدهای قالب استفاده کنیم، در خط بعد چک میکنیم اگر این مقدار در پست وجود داشته باشد، در حلقه‌ی جدید نام آن را استخراج می‌کنیم.&lt;/p&gt;

&lt;p&gt;حلقه‌ی بالا برای نمایش دادن تمام لیست‌های آرشیو موجود در هر سایت است، یعنی مثلا اگر category در هدر باشد، مقدار یا مقدارهای آن‌را به نمایش در می‌آورد، اما ممکن است بپرسید چرا در قالب post از این روش استفاده نکردیم و با استفاده از IF و FOREACH جدا جدا هر لیست را لود کردیم؟!&lt;/p&gt;

&lt;p&gt;جواب ساده است، برای اینکه کنترل بیشتری بر روی مکان هر آرشیو داشته باشیم، میخواستیم ترتیب لیست‌ها و مکان قرار گیریشان در قالب دقیقا تحت کنترل خودمان باشد، مثلا نام نویسنده را قبل از بدنه محتوا قرار بدهیم و دسته بندی ها را بعد از آن. اما برای feed نیازی به این مورد نداشتیم، فقط نیاز داریم همه‌ی لیست‌ها دقیقا بعد از متن نمایش داده شوند.&lt;/p&gt;

&lt;p&gt;همچنین از یک شرط جدید هم استفاده شده:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{- IF (loop.index != loop.max) -}},{{- END -}}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;با استفاده از loop میتوانیم مشخصات حلقه‌ی در حال اجرا را چک کنیم، loop.index می‌گوید که مرتبه چندم از اجرای حلقه هستیم و loop.max، حداکثر دفعاتی که یک حلقه FOREACH با توجه به سایز لیستی که لود کرده خواهد داشت.&lt;/p&gt;

&lt;p&gt;آیتم‌هایی که نمایش داده می‌شوند را با یک کاما بعد از هر کدام از هم جدا کردیم، اما نمیخواستیم که کاما بعد از آخرین آیتم هم نمایش داده شود، پس چک کردیم که اگر در آخر حلقه هستیم دیگر کاما نمایش داده نشود.&lt;/p&gt;

&lt;p&gt;بدون این شرط، برچسب زیر
    &lt;tags&gt;vimrc,terminal,vimrc bank,ترمینال,vim&lt;/tags&gt;&lt;/p&gt;

&lt;p&gt;به شکل زیر، بعد از vim یک کامای اضافه نمایش داده خواهد شد:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;tags&amp;gt;vimrc,terminal,vimrc bank,ترمینال,vim,&amp;lt;/tags&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;و نکته‌ی آخر، بعضی از خط ها بعد و قبل از استفاده از جفت آکولادها {{ }} از یک خط تیره - استفاده شده {{- -}}، آکولادها قبل و بعد از خود یک کاراکتر خط جدید را هم به نمایش در می‌آورند. البته برای ساختن قالب‌های html چندان اهمیتی ندارند، چرا که در html تا از &lt;br&gt; یا &lt;p&gt;&lt;/p&gt; یا سایر برچسب‌های مشابه استفاده نکنیم خطوط جدید ساخته نمی‌شوند، و این کاراکترهای خط جدید که قبل و بعد از آکولاد تولید می‌شوند، باعث تفکیک کدها و خواناتر شدن آن هم می‌شوند. اما برای ساختن یک xml تمیز بهتر است که این کاراکترهای خط جدید وجود نداشته باشند. با گذاشتن خط تیره - مانع از فاصله افتادن بین خطوط می‌شویم.&lt;/p&gt;</description>
          <pubDate>2017-03-28 19:21:48</pubDate>
          <link>/start-fa/feed-template/</link>
          <guid isPermaLink="true">/start-fa/feed-template/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>post template</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;فایل post.tt2 برای ساختن قالب تکی پست‌ها و نوشته در آدرسی است که در فیلد permalink در تنظیمات سایت مشخص کرده‌ایم استفاده می‌شود.&lt;/p&gt;

&lt;p&gt;در این مثال، آدرس‌های زیر با استفاده از این قالب ساخته می‌شوند:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;address.com/blog/category/year/month/day/post_title.html
address.com/en/year/month/day/post_title/
address.com/linux/author/post_title/
address.com/story/category/post_title/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;اگر به قالب‌های index و archive یک بار دیگر نگاه بیندازید میبینید که پست ها را با استفاده از یک حلقه {{ FOREACH post IN POSTS }} لود کردیم، در مورد post اما استفاده از این حلقه اجباری نیست، یعنی اگر از آن استفاده نکنیم باز هم &lt;strong&gt;post&lt;/strong&gt; مقدار معتبری دارد.&lt;/p&gt;

&lt;p&gt;هر دو کد زیر برای استفاده در post معتبر هستند:
    &lt;td&gt;
    {{ Foreach post IN POSTS }}
        {{ post.title }}
    {{ END }}
    &lt;/td&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;td&amp;gt;
    {{ post.title }}
&amp;lt;/td&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;در post.tt2 استفاده از حلقه POSTS زمانی مفید است که بخواهید با متغیر دیگری به جز post مقادیر را فراخوانی کنید، مثلا:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;td&amp;gt;
{{ Foreach entry IN POSTS }}
    {{ entry.title }}
{{ END }}
&amp;lt;/td&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;به جز این مورد تقریبا تمام برچسب‌های دیگر بین archive، post و index شبیه به هم هستند و معتبر. پس میتوانیم عینا از قالب index برای post هم استفاده کنیم، اما عملا این کار برای قالبی که در حال ساخت آن هستیم مفید نیست، چرا که در قالب index خلاصه نوشته ها را برای نمایش در نظر گرفتیم و نه متن کامل یا در index و archive جزییات زیادی از هر پست را لود نکردیم، مثلا در سایت آموزش لینوکس هر نوشته نام نویسنده‌ی متفاوتی داشت، یا دسته بندی‌هایی که انجام داد بودیم، مثل tag ها در وبلاگ ها یا keywordها در داستان و عکس اختصاصی که برای نوشته‌های وبلاگ فارسی و آموزش لینوکس داشتیم و category ها. البته تمام این موارد را میشود در قالب‌های index یا archive هم نمایش داد، اما برای ساده بودن قالب از آن‌ها چشم پوشی شده.&lt;/p&gt;

&lt;p&gt;اما نحوه‌ی اضافه کردن، تمام مشخصات هر نوشته که در هدر به آن نسبت داده شده مثل تاریخ، category، tag و ... در حلقه POSTS قابل بازیابی است، مثلا {{ post.category }}، البته برای لود کردن مقادیر گروهی یا آرشیوها باید از یک حلقه‌ها جدید داخل حلقه قبلی استفاده کنیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ FOREACH kw IN post.keywords }}
    {{ kw }}
{{ END }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;و اگر مقداری که فراخوانی میکنیم را قبلا آرشیو کرده باشیم، یعنی مقدارش را در فایل تنظیمات به فیلد lists وارد کرده باشیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ FOREACH tag IN post.tags.values }}
    &amp;lt;a href=&quot;{{ tag.url }}&quot;&amp;gt;{{ tag.name }}&amp;lt;/a&amp;gt;
{{ END }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;از آنجا که برای تمام سایت‌ها میخواهیم از یک قالب استفاده کنیم و لیست‌های آرشیو و فیلدهای سربرگ که برای هرکدام در نظر گرفتیم با دیگران متفاوت است، از عبارت شرطی {{ IF }} برای تست اینکه آیا فیلد مورد نظر در این پست وجود دارد یا نه کمک میگیریم، مثلا پست‌های وبلاگ داستان فیلد tags را در سربرگ نداشتند.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ IF tags }}
{{ FOREACH tag IN post.tags.values }}
    &amp;lt;a href=&quot;{{ tag.url }}&quot;&amp;gt;{{ tag.name }}&amp;lt;/a&amp;gt;
{{ END }}
{{ END }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;یک بار دیگر به جزییات سربرگ‌هایی که داشتیم برگردیم، تمام فیلدهایی که برای هر چهار سایت در نظر گرفته بودیم، این فیلدها بودند:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;image
description
author
category
tags
categories
keywords
suggests
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;که به جز keywords و suggests، در story و image در آموزش لینوکس و وبلاگ فارسی، مابقی را به عنوان لیست آرشیو برای سایت‌هایشان هم در نظر گرفته بودیم. با توجه به تمام توضیحاتی که دادیم قالب post را به این صورت می‌سازیم، کدهای زیر را در post.tt2 کپی کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta charset=&quot;utf-8&quot;&amp;gt;
    &amp;lt;meta name=&quot;description&quot; content=&quot;{{ DESCRIPTION }}&quot;&amp;gt;
    &amp;lt;meta name=&quot;author&quot; content=&quot;{{ MainAUTHOR }}&quot;&amp;gt;
    &amp;lt;link rel=&quot;shortcut icon&quot; href=&quot;{{ MAIN.author_image }}&quot;&amp;gt;
    &amp;lt;title&amp;gt;{{ PageTITLE }}&amp;lt;/title&amp;gt;
    &amp;lt;style&amp;gt;
    img {
    max-width: 100% !important;
    }
    &amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;center&amp;gt;
    &amp;lt;img src=&quot;{{ SITE.author_image }}&quot;&amp;gt;
    &amp;lt;h1&amp;gt;{{ TITLE }}&amp;lt;/h1&amp;gt;
    &amp;lt;h2&amp;gt;{{ DESCRIPTION }}&amp;lt;/h2&amp;gt;
    &amp;lt;/center&amp;gt;
    &amp;lt;hr&amp;gt;
    &amp;lt;table&amp;gt;
    &amp;lt;tr&amp;gt;
&amp;lt;!-- Content --&amp;gt;
    &amp;lt;td width=&quot;70%&quot;&amp;gt;
    {{ FOREACH post IN POSTS }}
      &amp;lt;h2&amp;gt;&amp;lt;a href=&quot;{{ post.url }}&quot;&amp;gt;{{ post.title }}&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
      &amp;lt;h5&amp;gt;{{ post.CALENDAR.jday_name }} {{ post.CALENDAR.jday }} {{ post.CALENDAR.jmonth_name }} {{ post.CALENDAR.jyear }}&amp;lt;/h5&amp;gt;
      &amp;lt;h5&amp;gt;{{ post.CALENDAR.day_name }} {{ post.CALENDAR.day }} {{ post.CALENDAR.month_name }} {{ post.CALENDAR.year }}&amp;lt;/h5&amp;gt;
      {{ IF post.description }}description: {{ post.description }}{{ END }}&amp;lt;br&amp;gt;
      {{ IF post.image }}&amp;lt;img src=&quot;{{ post.image }}&quot;&amp;gt;{{ END }}
      {{ IF post.author }}
      author: {{ FOREACH author IN post.author.values }}&amp;lt;a href=&quot;{{ author.url }}&quot;&amp;gt;{{ author.name }}&amp;lt;/a&amp;gt;{{ END }}&amp;lt;br&amp;gt;
      {{ END }}
      &amp;lt;p&amp;gt;{{ post.body.more }}&amp;lt;/p&amp;gt;
      {{ IF post.category }}
      category: {{ FOREACH cat IN post.category.values }}&amp;lt;a href=&quot;{{ cat.url }}&quot;&amp;gt;{{ cat.name }}&amp;lt;/a&amp;gt;{{ END }}&amp;lt;br&amp;gt;
      {{ END }}
      {{ IF post.tags }}
      tags: {{ FOREACH tag IN post.tags.values }}&amp;lt;a href=&quot;{{ tag.url }}&quot;&amp;gt;{{ tag.name }}&amp;lt;/a&amp;gt;/{{ END }}&amp;lt;br&amp;gt;
      {{ END }}
      {{ IF post.categories }}
      categories: {{ FOREACH cat IN post.categories.values }}&amp;lt;a href=&quot;{{ cat.url }}&quot;&amp;gt;{{ cat.name }}&amp;lt;/a&amp;gt;/{{ END }}&amp;lt;br&amp;gt;
      {{ END }}
      {{ IF post.keywords }}
      keywords: {{ FOREACH kw IN post.keywords }}{{ kw }}/{{ END }}&amp;lt;br&amp;gt;
      {{ END }}
      &amp;lt;hr&amp;gt;
    {{ END }}
    &amp;lt;/td&amp;gt;
&amp;lt;!-- sidebar --&amp;gt;
    &amp;lt;td width=&quot;30%&quot;&amp;gt;
    &amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
&amp;lt;!-- pagination --&amp;gt;
    &amp;lt;tr&amp;gt;
      &amp;lt;td width=&quot;30%&quot;&amp;gt;
      {{ IF PAGE.prev }}
        &amp;lt;a href=&quot;{{ PAGE.prev.url }}&quot;&amp;gt;prev: {{ PAGE.prev.title }}&amp;lt;/a&amp;gt;
      {{- END }}
        |
      {{ IF PAGE.next }}
            &amp;lt;a href=&quot;{{ PAGE.next.url }}&quot;&amp;gt;next: {{ PAGE.next.title }}&amp;lt;/a&amp;gt;
      {{- END }}
      &amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;   
    &amp;lt;/table&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;نکته&lt;/strong&gt;: &lt;br /&gt;
پیش از این در قسمت تنظیمات گفته شد که هر فیلدی که در تنظیمات اختصاصی سایت نباشد، مقدارش برابر با مقداری است که در فایل تنظیمات عمومی وجود دارد، اگر به یاد داشته باشید برای همین هم در تنظیم سایت دنباله دار، فیلد لیست را به صورت خالی وارد کردیم.&lt;/p&gt;

&lt;p&gt;حالا خطوط ۷ و ۱۷ قالب post را ببینید، در تنظیمات هیچ‌کدام از سایت‌ها فیلدی به نام author_image وجود نداشت این فیلد را تنها در تنظیمات عمومی نوشته بودیم، اما در خط ۱۷ به جای MAIN که متعلق به تنظیمات عمومی است، با SITE که برای تنظیمات سایت‌هاست، آن را لود کرده‌ایم و مقدار معتبری بر میگرداند. &lt;br /&gt;
البته استفاده از این تگ منطقی نیست و فقط برای مثال و درک بهتر کارکرد فیلدها در تنظیمات به این صورت نوشته شده.&lt;/p&gt;</description>
          <pubDate>2017-03-28 19:14:35</pubDate>
          <link>/start-fa/post-template/</link>
          <guid isPermaLink="true">/start-fa/post-template/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>archive template</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;فایل archive.tt2 حاوی قالب ساخت تمام صفحات آرشیو است، برای مثال این صفحه‌ها:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/blog/category/anime/
/blog/archive/1395/08/
/en/tags/Promise/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;فایل archive.tt2 را برای ویرایش باز کنید و کدهای زیر را در آن کپی کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta charset=&quot;utf-8&quot;&amp;gt;
    &amp;lt;meta name=&quot;description&quot; content=&quot;{{ DESCRIPTION }}&quot;&amp;gt;
    &amp;lt;meta name=&quot;author&quot; content=&quot;{{ MainAUTHOR }}&quot;&amp;gt;
    &amp;lt;link rel=&quot;shortcut icon&quot; href=&quot;{{ MAIN.author_image }}&quot;&amp;gt;
    &amp;lt;title&amp;gt;{{ PageTITLE }}&amp;lt;/title&amp;gt;
    &amp;lt;style&amp;gt;
    entry img {
    max-width: 100% !important;
    }
    &amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;center&amp;gt;
    &amp;lt;img src=&quot;{{ MAIN.logo }}&quot;&amp;gt;
    &amp;lt;h1&amp;gt;{{ TITLE }}&amp;lt;/h1&amp;gt;
    &amp;lt;h2&amp;gt;{{ ArchiveTITLE }}&amp;lt;/h2&amp;gt;
    &amp;lt;/center&amp;gt;
    &amp;lt;hr&amp;gt;
    &amp;lt;table&amp;gt;
    &amp;lt;tr&amp;gt;
&amp;lt;!-- Content --&amp;gt;
    &amp;lt;td width=&quot;70%&quot;&amp;gt;
    {{ FOREACH post IN POSTS }}
      &amp;lt;h2&amp;gt;&amp;lt;a href=&quot;{{ post.url }}&quot;&amp;gt;{{ post.title }}&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
    {{ END }}
    &amp;lt;/td&amp;gt;
&amp;lt;!-- sidebar --&amp;gt;
    &amp;lt;td width=&quot;30%&quot;&amp;gt;
    &amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
&amp;lt;!-- pagination --&amp;gt;
    &amp;lt;tr&amp;gt;
      &amp;lt;td width=&quot;30%&quot;&amp;gt;
      {{ IF PAGE.prev }}
        &amp;lt;a href=&quot;{{ PAGE.prev.url }}&quot;&amp;gt;prev: page {{ PAGE.prev.title }}&amp;lt;/a&amp;gt;
      {{- END }}
        | page {{ PAGE.number }} of {{PAGE.total}} |
      {{ IF PAGE.next }}
            &amp;lt;a href=&quot;{{ PAGE.next.url }}&quot;&amp;gt;next: page {{ PAGE.next.title }}&amp;lt;/a&amp;gt;
      {{- END }}
      &amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;   
    &amp;lt;/table&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;اگر به قالب‌های index و archive دقت کنید، تقریبا شبیه به هم هستند و تفاوت‌ها جزیی است، البته در index خلاصه متن را با {{ post.body.less }} فراخوانی کردیم، یا تاریخ‌ها را با برچسب‌های {{ post.CALENDAR }}، اما در قالب archive ما این برچسب‌ها نیستند، که به صورت اختیاری حذف شده‌اند و اگر نیازی داشته باشید می‌توانید از تمامشان استفاده کنید، تنها تفاوت بین این دو قالب {{ ArchiveTITLE }} است که در index یک برچسب نامعتبر به حساب می‌آید.&lt;/p&gt;</description>
          <pubDate>2017-03-28 19:12:38</pubDate>
          <link>/start-fa/archive-template/</link>
          <guid isPermaLink="true">/start-fa/archive-template/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>مثال‌هایی برای محتوا</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;برای اینکه مثال‌های کامل‌تری داشته باشیم، محتوای سایت‌هایمان را با استفاده از تعدادی از نوشته‌های سایت‌های زیر تکمیل می‌کنیم.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;behroozam.com برای استفاده در وبلاگ فارسی&lt;/li&gt;
&lt;li&gt;sallar.me وبلاگ انگلیسی&lt;/li&gt;
&lt;li&gt;morde.ir داستان‌ها&lt;/li&gt;
&lt;li&gt;linuxiha.ir آموزش لینوکس&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;&lt;a href=&quot;https://raw.githubusercontent.com/miraxy/sample/master/content.zip&quot;&gt;دانلود شاخهcontent&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;توضیح&lt;/strong&gt;: مثال‌هایی که در ادامه این بخش میخوانید در این فایل موجود نیستند، بهتر است برای کپی کردن این مثال‌ها در سایت آزمایشیتان، تا آخر این گام صبر کنید و پس از خواندن این بخش و ساختن فایل‌های مثال خودتان، محتویات را جایگزین کنید.&lt;/p&gt;</description>
          <pubDate>2017-03-28 13:08:55</pubDate>
          <link>/start-fa/content-dl/</link>
          <guid isPermaLink="true">/start-fa/content-dl/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>تنظیمات اختصاصی برای هر سایت</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;&lt;strong&gt;می‌خواهیم هر کدام از این چهار سایت را در این آدرس‌ها منتشر کنیم:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;وبلاگ فارسی: address.com/blog&lt;/li&gt;
&lt;li&gt;وبلاگ انگلیسی: address.com/en&lt;/li&gt;
&lt;li&gt;داستان دنباله‌دار: address.com/story&lt;/li&gt;
&lt;li&gt;آموزش لینوکس: address.com/linux&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;برای این منظور باید فیلدهای url و root را مقدار دهی کنیم.&lt;/p&gt;

&lt;p&gt;در مورد &lt;strong&gt;آدرس نهایی هر پست&lt;/strong&gt;: &lt;br /&gt;
به یاد داشته باشید آدرس‌ها میتوانند به شکل پوشه یا فایل تولید شوند، برای دیدن تفاوت این دو مورد، در پایان گام تنظیمات، تفاوت فیلد permalink در فایل‌های تنظیمات وبلاگ فارسی با سایر سایت‌ها را ببینید.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;تصمیم داریم نوشته‌های وبلاگ فارسی در آدرس‌هایی که براساس تاریخ انتشار و دسته بندی موضوعی تولید شده‌اند منتشر شوند و در آدرس نهایی category و تاریخ‌ها به شکل مسیر باشند و تیتر مطلب به شکل یک فایل باشد.&lt;/li&gt;
&lt;li&gt;پست‌های وبلاگ انگلیسی از تاریخ انتشار در آدرس ثایت استفاده کنند. آدرس به شکل یک مسیر باشد.&lt;/li&gt;
&lt;li&gt;برای داستان‌ها تنها نام داستان در آدرس باشد. آدرس به شکل یک مسیر باشد.&lt;/li&gt;
&lt;li&gt;در آموزش لینوکس، در آدرس‌ هر پست نام نویسنده هم ذکر شده باشد. آدرس به شکل یک مسیر باشد.
برای تنظیم این موارد در فایل تنظیمات فیلد permalink را باید مقدار دهی کنیم&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;لیست‌های آرشیوی مورد نظرمان:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;برای وبلاگ فارسی category و آرشیو زمانی بر اساس تاریخ شمسی&lt;/li&gt;
&lt;li&gt;برای وبلاگ انگلیسی tags و آرشیو زمانی بر اساس تاریخ میلادی&lt;/li&gt;
&lt;li&gt;برای داستان هیچ لیست آرشیوی در نظر نداریم&lt;/li&gt;
&lt;li&gt;و در آموزش هم tags, categories, author&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;برای این‌کار باید فیلد lists را مقدار دهی کنیم.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;نمایش تعداد نوشته‌ها در هر صفحه:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;برای وبلاگ‌های فارسی و انگلیسی، در صفحه اول میخواهیم ۵ نوشته آخر نوشته شده باشند، و در صفحات آرشیو هم تیتر ۱۰ نوشته آخر در هر صفحه باشد.&lt;/li&gt;
&lt;li&gt;برای آموزش‌ها میخواهیم در صفحه اصلی ۱۰ نوشته آخر نمایش داده شوند و در صفحات آرشیو تمام پست‌ها در یک صفحه برای هر آرشیو باشند.&lt;/li&gt;
&lt;li&gt;برای داستان دنباله دارمان هم میخواهیم تمام داستان‌هایی که تا به حال نوشته‌ایم در همان صفحه اول باشند، و ترتیب نمایششان هم برعکس باشد، به این ترتیب که نوشته‌های قدیمی‌تر در بالا باشند.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;برای نمایش تعداد هر پست در صفحه اول به فیلد post_num مقدار دهی میکنیم و برای تعداد پست‌ها در هر صفحه آرشیو هم archive_post_num &lt;br /&gt;
برای ترتیب نمایش هم فیلد post_sort &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;فایل‌های ضمیمه&lt;/strong&gt; وبلاگ‌های فارسی و انگلیسی را هم در زیر شاخه‌ی آدرس خودشان در شاخه‌ی assets می‌خواهیم ذخیره کنیم، اما ضمیمه‌های آموزش لینوکس و داستان را در زیرشاخه‌ی آدرس خود سایت اما در شاخه‌ی static.&lt;/p&gt;

&lt;p&gt;در آخر برای هر سه سایتی که به فارسی مینویسیم می‌خواهیم تاریخ هجری شمسی را هم داشته باشیم، برای این منظور باید پلاگین Jdate را فعال کنیم. و در وبلاگ فارسی آرشیو بر اساس تاریخ شمسی هم می‌خواهیم داشته باشیم.&lt;/p&gt;

&lt;p&gt;برای تنظیمات عمومی فایل config.yml در ریشه اصلی از قبل موجود است، برای ذخیره کردن تنظیمات مشخص شده برای هر سایت هم، در دایرکتوری config هم‌نام با نام هر سایت در شاخه یک فایل جدید با پسوند yml میسازیم&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~/mira/config/blog-fa.yml
~/mira/config/blog-en.yml
~/mira/config/story.yml
~/mira/config/linux-learn.yml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;با توجه به تمام مواردی که در بالا برای تنظیمات در نظر گرفتیم هر کدارم از این چهار فایل باید اینگونه باشند:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;~/mira/config/blog-fa.yml&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;title: وبلاگ فارسی من
description: اینجا وبلاگ فارسی من است
url: http://www.address.com/blog/
root: /blog/
static: /blog/assets
imageurl: /blog/assets/article_images
permalink: :category/:year/:month/:day/:title.html
post_num: 5
archive_post_num: 10
lists:
 - category
 - jdate
plugins:
 - Jdate
lang: fa
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;~/mira/config/blog-en.yml&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;title: my english blog
description: this is my english blog

url: http://www.address.com/en/
root: /en/
static: /en/assets
imageurl: /en/assets/images
permalink: :year/:month/:day/:title/
post_num: 5
archive_post_num: 10
lists:
 - tags
 - date
lang: en
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;~/mira/config/story.yml&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;title: دنباله دار
description: توضیحاتی در مورد داستان دنباله دار من
url: http://www.address.com/story/
root: /story/
static: /story/static
imageurl: /story/static/images
permalink: /:title/
post_num: all
post_sort: reverse
lists:
plugins:
 - Jdate
lang: fa
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;~/mira/config/linux-learn.yml&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;title: آموزش لینوکس
description: مطالبی که روزانه در مورد لینوکس یاد میگیریم و دوست داریم با دیگران به اشتراک بگذاریم

url: http://www.address.com/linux/
root: /linux/
static: /linux/static
imageurl: /linux/static/images
permalink: :author/:title/
default_markup: markdown
post_num: 10
archive_post_num: all
lists:
 - categories
 - tags
 - author
plugins:
 - Jdate
lang: fa
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;به فایل تنظیمات سایت «دنباله دار» نگاه کنید، فیلد lists وجود دارد، اما به آن مقداری داده نشده، این یعنی میخواهید هیچ آرشیوی نداشته باشید، اگر فیلد lists را به جای خالی رها کردن، کلا در تنظیمات وارد نمی‌کردیم، به معنی وجود نداشتن هیچ آرشیوی نیست، بلکه به این معنی بود که هر مقداری که فایل تنظیمات عمومی برای آرشیو در خود دارد برای این سایت هم همان مقدار در نظر گرفته شود.&lt;/p&gt;

&lt;p&gt;همانطور که میبینید در هیچ کدام از فایل‌های تنظیم اختصاصی template و default_markup وجود ندارد، اما در فایل تنظیمات عمومی، config.yml در شاخه‌ی اصلی این فیلد هم وجود دارد و هم مقدار دارد، وجود نداشتن یک فیلد در &lt;strong&gt;تنظیمات اختصاصی&lt;/strong&gt; به این معنی است که می‌خواهیم برای آن فیلد از تنظیمات عمومی پیروی کنیم. پس مقدار my-theme و markdown در config.yml، برای تمام سایت‌ها معتبر است.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;نکته:&lt;/strong&gt; در تنظیمات وبلاگ انگلیسی فیلدی را اضافه کرده‌ایم برای مشخص کردن زبان
&lt;code&gt;lang: en&lt;/code&gt;
و در سایر سایت‌ها
&lt;code&gt;lang: fa&lt;/code&gt;
این یک فیلد شخصی است که در تنظیمات هیچ تعریف مشخصی ندارد و روی تنظیمات تاثیری نمی‌گذارد، این فیلد را برای استفاده در قالب نهایی در آینده نوشته‌ایم، فعلا کاری با آن نداریم.&lt;/p&gt;</description>
          <pubDate>2017-03-28 11:41:43</pubDate>
          <link>/start-fa/specific-config/</link>
          <guid isPermaLink="true">/start-fa/specific-config/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>index template</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;فایل index.tt2 برای ساختن صفحه‌ی اصلی هر سایت در آدرسی است که برای آن در فیلدهای url و root تنظیماتش مشخص کرده‌اید.&lt;/p&gt;

&lt;p&gt;در این مثال، آدرس‌های زیر با استفاده از این قالب ساخته می‌شوند:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;address.com/blog/
address.com/blog/page/1/ , address.com/blog/page/2/ ...

address.com/en/
address.com/en/page/1/ , address.com/en/page/1/ ...

address.com/story/ ...
address.com/linux/ ...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;کدهای زیر را در index.tt2 کپی کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta charset=&quot;utf-8&quot;&amp;gt;
    &amp;lt;meta name=&quot;description&quot; content=&quot;{{ DESCRIPTION }}&quot;&amp;gt;
    &amp;lt;meta name=&quot;author&quot; content=&quot;{{ MainAUTHOR }}&quot;&amp;gt;
    &amp;lt;link rel=&quot;shortcut icon&quot; href=&quot;{{ MAIN.author_image }}&quot;&amp;gt;
    &amp;lt;title&amp;gt;{{ PageTITLE }}&amp;lt;/title&amp;gt;
    &amp;lt;style&amp;gt;
    entry img {
    max-width: 100% !important;
    }
    &amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;center&amp;gt;
    &amp;lt;img src=&quot;{{ MAIN.logo }}&quot;&amp;gt;
    &amp;lt;h1&amp;gt;{{ TITLE }}&amp;lt;/h1&amp;gt;
    &amp;lt;h2&amp;gt;{{ DESCRIPTION }}&amp;lt;/h2&amp;gt;
    &amp;lt;/center&amp;gt;
    &amp;lt;hr&amp;gt;
    &amp;lt;table&amp;gt;
    &amp;lt;tr&amp;gt;
&amp;lt;!-- Content --&amp;gt;
    &amp;lt;td width=&quot;70%&quot;&amp;gt;
    {{ FOREACH post IN POSTS }}
      &amp;lt;h2&amp;gt;&amp;lt;a href=&quot;{{ post.url }}&quot;&amp;gt;{{ post.title }}&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
      &amp;lt;h5&amp;gt;{{ post.CALENDAR.jday_name }} {{ post.CALENDAR.jday }} {{ post.CALENDAR.jmonth_name }} {{ post.CALENDAR.jyear }}&amp;lt;/h5&amp;gt;
      &amp;lt;h5&amp;gt;{{ post.CALENDAR.day_name }} {{ post.CALENDAR.day }} {{ post.CALENDAR.month_name }} {{ post.CALENDAR.year }}&amp;lt;/h5&amp;gt;
      &amp;lt;p&amp;gt;{{ post.body.less }}&amp;lt;/p&amp;gt;
      &amp;lt;br&amp;gt;
      &amp;lt;a href=&quot;{{ url }}#more&quot;&amp;gt;Continue...&amp;lt;/a&amp;gt;
      &amp;lt;hr&amp;gt;
    {{ END }}
    &amp;lt;/td&amp;gt;
&amp;lt;!-- sidebar --&amp;gt;
    &amp;lt;td width=&quot;30%&quot;&amp;gt;
    &amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
&amp;lt;!-- pagination --&amp;gt;
    &amp;lt;tr&amp;gt;
      &amp;lt;td width=&quot;30%&quot;&amp;gt;
      {{ IF PAGE.prev }}
        &amp;lt;a href=&quot;{{ PAGE.prev.url }}&quot;&amp;gt;prev: page {{ PAGE.prev.title }}&amp;lt;/a&amp;gt;
      {{- END }}
        | page {{ PAGE.number }} of {{PAGE.total}} |
      {{ IF PAGE.next }}
            &amp;lt;a href=&quot;{{ PAGE.next.url }}&quot;&amp;gt;next: page {{ PAGE.next.title }}&amp;lt;/a&amp;gt;
      {{- END }}
      &amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;   
    &amp;lt;/table&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;از آنجا که بدنه اصلی کدهای تشکیل دهنده‌ی index، archive و post تقریبا یکی است، در مورد این کدها بعد از ساختن قالب post بیشتر توضیح می‌دهیم. و توضیحات تکمیلی‌تر را هم بعد از ساختن atom.tt2 با هم مرور می‌کینم.&lt;/p&gt;</description>
          <pubDate>2017-03-28 19:09:26</pubDate>
          <link>/start-fa/index-template/</link>
          <guid isPermaLink="true">/start-fa/index-template/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>main template</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;فایل main.tt2 برای ساختن یک قالب مشترک بین تمام سایت‌هاست، یک صفحه ارتباطی.&lt;/p&gt;

&lt;p&gt;مسیری که به عنوان url و root در فایل config.yml مشخص کرده باشید با استفاده از این قالب ساخته می‌شود.&lt;/p&gt;

&lt;p&gt;در این مثال این صفحه با استفاده از این قالب ساخته می‌شود.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;address.com/index.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;این فایل را با هر ویرایشگری که دوست دارید باز کنید و کدهای زیر را در آن کپی کنید&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta charset=&quot;utf-8&quot;&amp;gt;
    &amp;lt;meta name=&quot;description&quot; content=&quot;{{ MainDESCRIPTION }}&quot;&amp;gt;
    &amp;lt;meta name=&quot;author&quot; content=&quot;{{ MainAUTHOR }}&quot;&amp;gt;
    &amp;lt;link rel=&quot;shortcut icon&quot; href=&quot;{{ MAIN.author_image }}&quot;&amp;gt;
    &amp;lt;title&amp;gt;{{ PageTITLE }}&amp;lt;/title&amp;gt;
    &amp;lt;style&amp;gt;
    entry img {
    max-width: 100% !important;
    }
    &amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;center&amp;gt;
    &amp;lt;img src=&quot;{{ MAIN.logo }}&quot;&amp;gt;
    &amp;lt;h1&amp;gt;{{ MainTITLE }}&amp;lt;/h1&amp;gt;
    &amp;lt;h2&amp;gt;{{ MainDESCRIPTION }}&amp;lt;/h2&amp;gt;
    &amp;lt;/center&amp;gt;
    &amp;lt;hr&amp;gt;
    &amp;lt;table&amp;gt;
    &amp;lt;tr&amp;gt;
    {{ FOREACH site IN FLOORS.values.sort('name') }}
      &amp;lt;td style=&quot;border-right: 1px solid black; width: 25%;&quot; valign=&quot;top&quot;&amp;gt;
      &amp;lt;h2&amp;gt;&amp;lt;a href=&quot;{{ site.root }}&quot;&amp;gt;{{ site.name }}&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;
      &amp;lt;p&amp;gt;{{ site.description }}&amp;lt;/p&amp;gt;
      &amp;lt;hr&amp;gt;
      &amp;lt;ul&amp;gt;
      {{ FOREACH post IN site.posts }}
        &amp;lt;li&amp;gt;&amp;lt;h4&amp;gt;&amp;lt;a href=&quot;{{ post.url }}&quot;&amp;gt;{{ post.title }}&amp;lt;/a&amp;gt;&amp;lt;h4&amp;gt;&amp;lt;/li&amp;gt;
        {{ post.body.less }}
      {{ END }}
      &amp;lt;/ul&amp;gt;
      &amp;lt;/td&amp;gt;
    {{ END }}
    &amp;lt;/tr&amp;gt;
    &amp;lt;/table&amp;gt;

&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;نکته&lt;/strong&gt;: تمام مواردی را که در تنظیمات ذخیره شده می‌توان با استفاده از بر چسب‌های MAIN و SITE در قالب نیز فراخوانی کرد، مانند خط ۲۱ همین قالب که با استفاده از {{ MAIN.logo }} مقداری را که در config.yml ذخیره کرده بودیم را فراخوانی کردیم.&lt;/p&gt;

&lt;p&gt;همیچنین می‌توان تنظیماتی که در شاخه‌ی config و برای هر سایت مشخص کرده‌ایم را به این شکل فراخوانی کرد: {{ SITE.lang }} و ...&lt;/p&gt;

&lt;p&gt;حالا که یک قالب داریم میتوانیم اولین build را انجام دهیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mira build
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;یک نسخه‌ی قابل انتشار از سایت در شاخه‌ی public به وجود آمده، حالا با دستور 
    mira view&lt;/p&gt;

&lt;p&gt;یک سرور برای پیش نمایش اجرا می‌کینم.&lt;/p&gt;

&lt;p&gt;حالا به این آدرس بروید:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;//127.0.0.1:5000&quot;&gt;127.0.0.1:5000&lt;/a&gt;&lt;/p&gt;</description>
          <pubDate>2017-03-28 19:06:14</pubDate>
          <link>/start-fa/main-template/</link>
          <guid isPermaLink="true">/start-fa/main-template/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>توضیح ساختار قالب در میرا</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;هر قالب در میرا یک پوشه است در شخه‌ی template&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~mira/template/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;گفتیم که در این مثال می‌خواهیم یک قالب جدید با نام my-theme را برای استفاده در سایت‌مان بسازیم. پس نیاز به یک دایرکتوری جدید به همین نام در مسیر فوق داریم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~/mira/template/my-theme/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;هر قالب در میرا از تعدادی فایل پوسته تشکیل می‌شود، پنج فایل به شکل پیش فرض تعریف شده‌اند و هر تعداد که بخواهید فایل‌های فرعی.&lt;/p&gt;

&lt;p&gt;پنج فایلی که برای داشتن یک قالب کامل مورد نیاز هستند این ها هستند: main.tt2 و index.tt2 و archive.tt2 و post.tt2 و atom.tt2&lt;/p&gt;

&lt;p&gt;یک توضیح مختصر در مورد اینکه هر کدام از این‌فایل‌ها برای چه کاری مورد استفاده قرار می‌گیرند:&lt;/p&gt;

&lt;p&gt;فایل main.tt2 برای ساختن یک قالب مشترک بین تمام سایت‌هاست، یک صفحه ارتباطی. در اصل پوسته‌ی سازنده‌ی root عمومی که در config.yml تعریف کردیم. در این مثال address.com/index.html با این پوسته ساخته می‌شود.&lt;/p&gt;

&lt;p&gt;فایل index.tt2 برای ساختن صفحه‌ی اصلی هر سایت در آدرسی است که برای آن در فیلدهای url و root تنظیماتش مشخص کرده‌اید استفاده می‌شود.&lt;/p&gt;

&lt;p&gt;فایل archive.tt2 حاوی قالب ساخت تمام صفحات آرشیو است.&lt;/p&gt;

&lt;p&gt;فایل post.tt2 برای ساختن قالب تکی پست‌ها و نوشته‌ها در آدرسی است که در فیلد permalink در تنظیمات سایت مشخص کرده‌ایم.&lt;/p&gt;

&lt;p&gt;فایل atom.tt2 برای ساختن فید مطالب هر سایت به کار می‌رود.&lt;/p&gt;

&lt;p&gt;پنج فایل جدید در شاخه‌ی قالب my-theme بسازید.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~/mira/template/my-theme/
.
│
├── archive.tt2
├── atom.tt2
├── index.tt2
├── main.tt2
└── post.tt2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;می‌توانید قالبی را که در ادامه به ساختن آن می‌پردازیم را از این جا دانلود کنید:&lt;/p&gt;

&lt;h4&gt;دانلود &lt;a href=&quot;https://raw.githubusercontent.com/miraxy/sample/master/template.zip&quot;&gt;شاخه template&lt;/a&gt;&lt;/h4&gt;</description>
          <pubDate>2017-03-28 13:24:05</pubDate>
          <link>/start-fa/template/</link>
          <guid isPermaLink="true">/start-fa/template/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>مسیر تصاویر یا imageurl</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;در تنظیمات یک فیلد دیگر را به نام imageurl مقدار دهی کرده بودیم، برخلاف فیلد static که در تنظیمات عمومی تاثیر گذار بود و در تنظیمات اختصاصی تنها برای دسترسی در قالب استفاده می‌شد، این فیلد در تنظیمات عمومی استفاده‌ی خاصی ندارد و فقط برای دسترسی در قالب تعریف شده، اما در تنظیمات اختصاصی تاثیر گذار است.&lt;/p&gt;

&lt;p&gt;مورد استفاده این فیلد در پارسرهای داخلی میرا و هنگلم نوشتن متن محتوا است، در تنظیمات وبلاگ فارسی به این فیلد این مقدار را داده بودیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;imageurl: /blog/assets/article_images
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;حالا در هر کدام از نوشته‌های این سایت اگر از تگ {{ img }} استفاده کنیم، میرا دنبال تصاویر در این مسیر میگردد. &lt;br /&gt;
نحوه‌ی استفاده از {{ img }} به این شکل است:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;{{ img image/address/pic.jpg [alt] [title] }}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;اولین نوشته در وبلاگ فارسی را به یاد دارید؟&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~/mira/content/blog-fa/2017-3-23-سلام-دنیا.md
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;بیایید یک‌بار دیگر آن‌را ویرایش کنیم:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;---
utid: 20170323112305
date: 2017-03-23 11:23:05
title: سلام دنیا
_index: hello world
category: آزمایش
image: /blog/assets/article_images/hello.jpg
---
سلام دنیا  
این اولین نوشته من است که برای تست کردن نوشته شده.

{{ img /future/sky.jpg [image alt] [pic title] }}

این یک متن آزمایشی است.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;نتیجه‌ی نهایی برای انتشار این‌گونه خواهد بود:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;p&amp;gt;سلام دنیا&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;این اولین نوشته من است که برای تست کردن نوشته شده.&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;&amp;lt;img src=&quot;/blog/assets/article_images/future/sky.jpg&quot; alt=&quot;image alt&quot; title=&quot;pic title&quot;&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p&amp;gt;این یک متن آزمایشی است.&amp;lt;/p&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;در برچسب {{ img }} مقادیر [alt] و [title] اختیاری هستند و می‌توانید از آن‌ها چشم پوشی کنید.&lt;/p&gt;</description>
          <pubDate>2017-03-28 13:03:29</pubDate>
          <link>/start-fa/images-statics/</link>
          <guid isPermaLink="true">/start-fa/images-statics/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>ضمیمه‌های اختصاصی هر طبقه</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;در پوشه‌ی محتوای هر سایت در شاخه‌ی content هر پوشه‌ای که نامش با خط زیر یا همان آندرلاین _ شروع شود از نظر میرا یک پوشه‌ی ضمیمه به حساب می‌آید و تمام محتویات آن‌را بدون هیچ بررسی به مسیر اصلی سایت منتقل میکند.&lt;/p&gt;

&lt;p&gt;یک مثال: &lt;br /&gt;
در بخش تنظیمات برای وبلاگ فارسی(blog-fa) در فیلدهای url و root مسیر blog را برای انتشار مشخص کردیم، پس هر پوشه‌ای که در مسیر blog-fa با ـ شروع شود به عنوان ضمیمه در مسیر blog آدرس دهی میشود، به این مثال‌ها دقت کنید:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~mira/content/blog-fa/_assets
/blog/assets/

~mira/content/blog-fa/_statics
/blog/statics/

~mira/content/blog-fa/deep/_image
/blog/deep/image

~mira/content/blog-fa/more/deep/folder/_attach
/blog/more/deep/folder/attach
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;دقت داشته باشید قبل از رسیدن به پوشه‌ی ضمیمه، اگر فایل محتوایی موجود باشد، برای انتشار آماده می‌شود، تنها بعد از رسیدن به اولین شاخه‌ای که با _ شروع شده باشد، میرا دست از نفوذ به عمق شاخه‌ها می‌کشد. برای مثال مسیرهای زیر را در نظر بگیرید&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~mira/content/blog-fa/more/content.md
~mira/content/blog-fa/more/deep/post.txt
~mira/content/blog-fa/more/deep/folder/contetnt.md
~mira/content/blog-fa/more/deep/folder/_attach
~mira/content/blog-fa/more/deep/folder/_attach/post.markdown
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;میرا سه فایل اول را که قبل از رسیدن به
&lt;code&gt;~mira/content/blog-fa/more/deep/folder/_attach&lt;/code&gt;
قرار دارند، برای انتشار بررسی و آماده می‌کند، اما فایل آخر
&lt;code&gt;~mira/content/blog-fa/more/deep/folder/_attach/post.markdown&lt;/code&gt;
را به عنوان یک فایل ضمیمه می‌شناسد و تنها آن را همان شکلی که هست به مسیر انتشار انتقال می‌دهد.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;نکته&lt;/strong&gt;: &lt;br /&gt;
احتمالا متوجه شدید که فیلد static در فایل تنظیمات اختصاصی هیچ تاثری در انتقال و آدرس‌دهی به مسیر فایل‌ها و پوشه‌های ضمیمه برای سایت‌ها ندارد.&lt;/p&gt;

&lt;p&gt;این فیلد تنها جهت سهولت دسترسی در قالب و استفاده در قالب سایت با تگ
&lt;code&gt;{{ STATIC }}&lt;/code&gt;
یا
&lt;code&gt;{{ SITE.static }}&lt;/code&gt;
می‌باشد.&lt;/p&gt;

&lt;h4&gt;اگر فایل مثال برای content را دانلود کرده باشید، محتوای اختصاصی static هر سایت، همراه با فایل content دانلود شده&lt;/h4&gt;</description>
          <pubDate>2017-03-28 12:56:32</pubDate>
          <link>/start-fa/specific-statics/</link>
          <guid isPermaLink="true">/start-fa/specific-statics/</guid>


        <category>
          
        </category>
        </item>
      
        <item>
          <title>ضمیمه‌های عمومی</title>
          <description>&lt;a name=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;p&gt;هنگام استفاده از میرا، در مسیر statics در شاخه‌ی اصلی که پیکربندی شده، فایل‌های ثابت و ضمیمه‌ی عمومی را می‌توانید نگهداری کنید.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;~/mira/statics&lt;/code&gt;
محتویات این پوشه به مسیری که در فایل تنظیمات
&lt;code&gt;~/mira/config.yml&lt;/code&gt;
و فیلد static مسیر دهی کرده‌اید منتقل می‌شود و در قالب با استفاده از کد
&lt;code&gt;{{ MainSTATIC }}&lt;/code&gt;
یا
&lt;code&gt;{{ MAIN.static }}&lt;/code&gt;
قابل دسترسی خواهد بود.&lt;/p&gt;

&lt;p&gt;برای مثال اگر فیلد static در فایل config.yml مساوی
&lt;code&gt;/attach&lt;/code&gt;
باشد و سایت‌مان را قرار باشد در address.com منتشر کنیم، نتیحه مسیری شبیه به این خواهد بود:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;~/mira/config.yml  &amp;gt;       static: /attach
 ‌
~/mira/statics     &amp;gt;       http://address.com/attach/
&lt;/code&gt;&lt;/pre&gt;

&lt;h4&gt;دانلود &lt;a href=&quot;https://raw.githubusercontent.com/miraxy/sample/master/statics.zip&quot;&gt;شاخه عمومی statics&lt;/a&gt;&lt;/h4&gt;</description>
          <pubDate>2017-03-28 12:55:39</pubDate>
          <link>/start-fa/general-statics/</link>
          <guid isPermaLink="true">/start-fa/general-statics/</guid>


        <category>
          
        </category>
        </item>
      


    </channel>
</rss>
